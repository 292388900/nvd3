<!DOCTYPE html>
<meta charset="utf-8">

<link href="../src/nv.d3.css" rel="stylesheet" type="text/css">

<style>

body {
  overflow-y:scroll;
}

text {
  font: 12px sans-serif;
}

svg {
  display: block;
}

#chart1 svg {
  height: 500px;
  min-width: 100px;
  min-height: 100px;
/*
  margin: 50px;
  Minimum height and width is a good idea to prevent negative SVG dimensions...
  For example width should be =< margin.left + margin.right + 1,
  of course 1 pixel for the entire chart would not be very useful, BUT should not have errors
*/
}

</style>
<body>

  <div id="chart1">
    <svg style="height: 500px;"></svg>
  </div>

<script src="../lib/d3.v2.js"></script>
<script src="../nv.d3.js"></script>
<script src="../src/tooltip.js"></script>
<script src="../src/utils.js"></script>
<script src="../src/models/legend.js"></script>
<script src="../src/models/axis.js"></script>
<script src="../src/models/scatter.js"></script>
<script src="../src/models/line.js"></script>
<script src="../src/models/lineChart.js"></script>
<script>


var test_data = [ { "key" : "Fund" , "area" : true , "values" : [ { "x" : 1241064000000 , "y" : 0.0} , { "x" : 1243742400000 , "y" : 0.0} , { "x" : 1246334400000 , "y" : 0.0} , { "x" : 1249012800000 , "y" : 0.0} , { "x" : 1251691200000 , "y" : 0.0} , { "x" : 1254283200000 , "y" : 0.0} , { "x" : 1256961600000 , "y" : 0.0} , { "x" : 1259557200000 , "y" : 0.0} , { "x" : 1262235600000 , "y" : 0.0} , { "x" : 1264914000000 , "y" : 0.0} , { "x" : 1267333200000 , "y" : 0.0} , { "x" : 1270008000000 , "y" : 0.0} , { "x" : 1272600000000 , "y" : 0.0} , { "x" : 1275278400000 , "y" : -0.030399999999999983} , { "x" : 1277870400000 , "y" : -0.04009600000000002} , { "x" : 1280548800000 , "y" : -0.01907410239999996} , { "x" : 1283227200000 , "y" : -0.010049584142079904} , { "x" : 1285819200000 , "y" : 0.0} , { "x" : 1288497600000 , "y" : 0.0} , { "x" : 1291093200000 , "y" : 0.0} , { "x" : 1293771600000 , "y" : 0.0} , { "x" : 1296450000000 , "y" : 0.0} , { "x" : 1298869200000 , "y" : 0.0} , { "x" : 1301544000000 , "y" : 0.0} , { "x" : 1304136000000 , "y" : 0.0} , { "x" : 1306814400000 , "y" : -0.0016800000000000148} , { "x" : 1309406400000 , "y" : -0.002778151999999978} , { "x" : 1312084800000 , "y" : -0.005071762250399958} , { "x" : 1314763200000 , "y" : -0.027457647599765878} , { "x" : 1317355200000 , "y" : -0.06383073157953467} , { "x" : 1320033600000 , "y" : -0.03817969362481388} , { "x" : 1322629200000 , "y" : -0.04443152561625252} , { "x" : 1325307600000 , "y" : -0.03869811476995} , { "x" : 1327986000000 , "y" : -0.0047545452024769785} , { "x" : 1330491600000 , "y" : 0.0} , { "x" : 1333166400000 , "y" : 0.0} , { "x" : 1335758400000 , "y" : -0.005190000000000028} , { "x" : 1338436800000 , "y" : -0.02996076900000011} , { "x" : 1341028800000 , "y" : -0.022394462998200027} , { "x" : 1343707200000 , "y" : -0.010663196554178467} , { "x" : 1346385600000 , "y" : -0.0037378389300578574}]} , { "key" : "BM1" , "values" : [ { "x" : 1241064000000 , "y" : 0.0} , { "x" : 1243742400000 , "y" : 0.0} , { "x" : 1246334400000 , "y" : 0.0} , { "x" : 1249012800000 , "y" : 0.0} , { "x" : 1251691200000 , "y" : 0.0} , { "x" : 1254283200000 , "y" : 0.0} , { "x" : 1256961600000 , "y" : -0.02217570000000002} , { "x" : 1259557200000 , "y" : 0.0} , { "x" : 1262235600000 , "y" : 0.0} , { "x" : 1264914000000 , "y" : -0.03559000000000001} , { "x" : 1267333200000 , "y" : -0.0036653286519999773} , { "x" : 1270008000000 , "y" : 0.0} , { "x" : 1272600000000 , "y" : 0.0} , { "x" : 1275278400000 , "y" : -0.07890470000000005} , { "x" : 1277870400000 , "y" : -0.1287806288520501} , { "x" : 1280548800000 , "y" : -0.06802257400562606} , { "x" : 1283227200000 , "y" : -0.11142494912966927} , { "x" : 1285819200000 , "y" : -0.029584787791874345} , { "x" : 1288497600000 , "y" : 0.0} , { "x" : 1291093200000 , "y" : 0.0} , { "x" : 1293771600000 , "y" : 0.0} , { "x" : 1296450000000 , "y" : 0.0} , { "x" : 1298869200000 , "y" : 0.0} , { "x" : 1301544000000 , "y" : 0.0} , { "x" : 1304136000000 , "y" : 0.0} , { "x" : 1306814400000 , "y" : -0.011419900000000038} , { "x" : 1309406400000 , "y" : -0.02826105400957002} , { "x" : 1312084800000 , "y" : -0.04969751798422428} , { "x" : 1314763200000 , "y" : -0.10345612939185678} , { "x" : 1317355200000 , "y" : -0.17022184109043226} , { "x" : 1320033600000 , "y" : -0.07644894326332552} , { "x" : 1322629200000 , "y" : -0.07827018594721025} , { "x" : 1325307600000 , "y" : -0.06983285557533381} , { "x" : 1327986000000 , "y" : -0.02584311193105915} , { "x" : 1330491600000 , "y" : 0.0} , { "x" : 1333166400000 , "y" : 0.0} , { "x" : 1335758400000 , "y" : -0.006169199999999986} , { "x" : 1338436800000 , "y" : -0.06637586739631995} , { "x" : 1341028800000 , "y" : -0.029593317269653197} , { "x" : 1343707200000 , "y" : -0.017959305631735756} , { "x" : 1346385600000 , "y" : 0.0}]} , { "key" : "BM2" , "values" : [ { "x" : 1241064000000 , "y" : 0.0} , { "x" : 1243742400000 , "y" : 0.0} , { "x" : 1246334400000 , "y" : 0.0} , { "x" : 1249012800000 , "y" : 0.0} , { "x" : 1251691200000 , "y" : 0.0} , { "x" : 1254283200000 , "y" : 0.0} , { "x" : 1256961600000 , "y" : -0.06789509999999999} , { "x" : 1259557200000 , "y" : -0.038635954347039925} , { "x" : 1262235600000 , "y" : 0.0} , { "x" : 1264914000000 , "y" : -0.0368115} , { "x" : 1267333200000 , "y" : 0.0} , { "x" : 1270008000000 , "y" : 0.0} , { "x" : 1272600000000 , "y" : 0.0} , { "x" : 1275278400000 , "y" : -0.07585330000000001} , { "x" : 1277870400000 , "y" : -0.14746912436979998} , { "x" : 1280548800000 , "y" : -0.08888379936810564} , { "x" : 1283227200000 , "y" : -0.1563409295188698} , { "x" : 1285819200000 , "y" : -0.051224046509574794} , { "x" : 1288497600000 , "y" : -0.012398806206411761} , { "x" : 1291093200000 , "y" : 0.0} , { "x" : 1293771600000 , "y" : 0.0} , { "x" : 1296450000000 , "y" : -0.0025768000000000457} , { "x" : 1298869200000 , "y" : 0.0} , { "x" : 1301544000000 , "y" : 0.0} , { "x" : 1304136000000 , "y" : 0.0} , { "x" : 1306814400000 , "y" : -0.01874880000000001} , { "x" : 1309406400000 , "y" : -0.04137233141695995} , { "x" : 1312084800000 , "y" : -0.07602212022342769} , { "x" : 1314763200000 , "y" : -0.1564103209131129} , { "x" : 1317355200000 , "y" : -0.2509783267591432} , { "x" : 1320033600000 , "y" : -0.1376078294385863} , { "x" : 1322629200000 , "y" : -0.14075142137871677} , { "x" : 1325307600000 , "y" : -0.13507556896777595} , { "x" : 1327986000000 , "y" : -0.07396779299091827} , { "x" : 1330491600000 , "y" : -0.051805619799894065} , { "x" : 1333166400000 , "y" : -0.027510698932092903} , { "x" : 1335758400000 , "y" : -0.04253264391675882} , { "x" : 1338436800000 , "y" : -0.10590702522896611} , { "x" : 1341028800000 , "y" : -0.06129187519718904} , { "x" : 1343707200000 , "y" : -0.07426397664465156} , { "x" : 1346385600000 , "y" : -0.04339327232661616}]}];


// Wrapping in nv.addGraph allows for '0 timeout render', stors rendered charts in nv.graphs, and may do more in the future... it's NOT required
nv.addGraph(function() {
  var chart = nv.models.lineChart();

  chart
      .x(function(d,i) { return i })


  chart.xAxis // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the partent chart, so need to chain separately
      .tickFormat(d3.format(',.1f'));

  chart.yAxis
      .axisLabel('Voltage (v)')
      .tickFormat(d3.format(',.2f'));

  d3.select('#chart1 svg')
      //.datum([]) //for testing noData
      //.datum(sinAndCos())
      .datum(test_data)
    .transition().duration(500)
      .call(chart);

  //TODO: Figure out a good way to do this automatically
  nv.utils.windowResize(chart.update);
  //nv.utils.windowResize(function() { d3.select('#chart1 svg').call(chart) });

  return chart;
});



function sinAndCos() {
  var sin = [],
      cos = [];

  for (var i = 0; i < 100; i++) {
    sin.push({x: i, y: i % 10 == 5 ? null : Math.sin(i/10) }); //the nulls are to show how defined works
    cos.push({x: i, y: .5 * Math.cos(i/10)});
  }

  return [
    {
      area: true,
      values: sin,
      key: "Sine Wave",
      color: "#ff7f0e"
    },
    {
      values: cos,
      key: "Cosine Wave",
      color: "#2ca02c"
    }
  ];
}


</script>
