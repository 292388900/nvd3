(function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s||u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e={version:"0.0.1a",dev:!0};window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.log={},e.dispatch=d3.dispatch("render_start","render_end"),e.dispatch.on("render_start",function(t){e.log.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.log.endTime=+(new Date),e.log.totalTime=e.log.endTime-e.log.startTime,e.dev&&console.log&&console.log("total",e.log.totalTime)}),e.render=function r(t){t=t||1,r.active=!0,e.dispatch.render_start(),setTimeout(function(){var n;for(var i=0;i<t&&(graph=r.queue[i]);i++)n=graph.generate(),typeof graph.callback=="function"&&graph.callback(n),e.graphs.push(n);r.queue.splice(0,i),r.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.queue=[],e.addGraph=function(t){typeof arguments[0]=="function"&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),function(){var t=window.nv.tooltip={};t.show=function(){var t=Array.prototype.slice.call(arguments),n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=document.createElement("div");u.className="nvtooltip",i=i||"s",s=s||20;var a=o?o:document.getElementsByTagName("body")[0];u.innerHTML=r,u.style.left=1,u.style.top=1,u.style.opacity=0,a.appendChild(u);var f=parseInt(u.offsetHeight),l=parseInt(u.offsetWidth),c=e.utils.windowSize().width,h=e.utils.windowSize().height,p=a.scrollTop,d=a.scrollLeft,v,m;switch(i){case"e":v=n[0]-l-s,m=n[1]-f/2,v<d&&(v=n[0]+s),m<p&&(m=p+5),m+f>p+h&&(m=p-f-5);break;case"w":v=n[0]+s,m=n[1]-f/2,v+l>c&&(v=n[0]-l-s),m<p&&(m=p+5),m+f>p+h&&(m=p-f-5);break;case"n":v=n[0]-l/2,m=n[1]+s,v<d&&(v=d+5),v+l>c&&(v=c-l-5),m+f>p+h&&(m=n[1]-f-s);break;case"s":v=n[0]-l/2,m=n[1]-f-s,v<d&&(v=d+5),v+l>c&&(v=c-l-5),p>m&&(m=n[1]+20)}return u.style.left=v+"px",u.style.top=m+"px",u.style.opacity=1,u},t.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){var t=window.onresize;window.onresize=function(n){typeof t=="function"&&t(n),e(n)}},e.models.axis=function(){function o(u){return u.each(function(o){var u=d3.select(this),a=u.selectAll("g.wrap.axis").data([o]),f=a.enter().append("g").attr("class","wrap axis"),l=f.append("g"),c=a.select("g");(i.orient()=="top"||i.orient()=="bottom")&&i.ticks(Math.abs(e.range()[1]-e.range()[0])/100),d3.transition(c).call(i),s=s||i.scale();var h=c.selectAll("text.axislabel").data([t||null]);h.exit().remove();switch(i.orient()){case"top":h.enter().append("text").attr("class","axislabel").attr("text-anchor","middle").attr("y",0),h.attr("x",e.range()[1]/2);if(n){var p=a.selectAll("g.axisMaxMin").data(e.domain());p.enter().append("g").attr("class","axisMaxMin").append("text"),p.exit().remove(),p.attr("transform",function(t,n){return"translate("+e(t)+",0)"}).select("text").attr("dy","0em").attr("y",-i.tickPadding()).attr("text-anchor","middle").text(function(e,t){return i.tickFormat()(e)}),d3.transition(p).attr("transform",function(t,n){return"translate("+e.range()[n]+",0)"})}break;case"bottom":h.enter().append("text").attr("class","axislabel").attr("text-anchor","middle").attr("y",25),h.attr("x",e.range()[1]/2);if(n){var p=a.selectAll("g.axisMaxMin").data(e.domain());p.enter().append("g").attr("class","axisMaxMin").append("text"),p.exit().remove(),p.attr("transform",function(t,n){return"translate("+e(t)+",0)"}).select("text").attr("dy",".71em").attr("y",i.tickPadding()).attr("text-anchor","middle").text(function(e,t){return i.tickFormat()(e)}),d3.transition(p).attr("transform",function(t,n){return"translate("+e.range()[n]+",0)"})}break;case"right":h.enter().append("text").attr("class","axislabel").attr("transform","rotate(90)").attr("y",-40),h.attr("x",-e.range()[0]/2);if(n){var p=a.selectAll("g.axisMaxMin").data(e.domain());p.enter().append("g").attr("class","axisMaxMin").append("text").style("opacity",0),p.exit().remove(),p.attr("transform",function(t,n){return"translate(0,"+e(t)+")"}).select("text").attr("dy",".32em").attr("dx",i.tickPadding()).attr("text-anchor","start").text(function(e,t){return i.tickFormat()(e)}),d3.transition(p).attr("transform",function(t,n){return"translate(0,"+e.range()[n]+")"}).select("text").style("opacity",1)}break;case"left":h.enter().append("text").attr("class","axislabel").attr("transform","rotate(-90)").attr("y",-40),h.attr("x",-e.range()[0]/2);if(n){var p=a.selectAll("g.axisMaxMin").data(e.domain());p.enter().append("g").attr("class","axisMaxMin").append("text").style("opacity",0),p.exit().remove(),p.attr("transform",function(e,t){return"translate(0,"+s(e)+")"}).select("text").attr("dy",".32em").attr("dx",-i.tickPadding()).attr("text-anchor","end").text(function(e,t){return i.tickFormat()(e)}),d3.transition(p).attr("transform",function(t,n){return"translate(0,"+e.range()[n]+")"}).select("text").style("opacity",1)}}h.text(function(e){return e}),n&&(i.orient()==="left"||i.orient()==="right")&&c.selectAll("g").filter(function(t,n){return t&&(e(t)<8||e(t)>e.range()[0]-8)}).remove();if(n&&(i.orient()==="top"||i.orient()==="bottom")){var d=[];a.selectAll("g.axisMaxMin").each(function(t,n){n?d.push(e(t)-this.getBBox().width-4):d.push(e(t)+this.getBBox().width+4)}),c.selectAll("g").filter(function(t,n){return t&&(e(t)<d[0]||e(t)>d[1])}).remove()}r&&c.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),s=e.copy()}),o}var e=d3.scale.linear(),t=null,n=!0,r=!0,i=d3.svg.axis().scale(e).orient("bottom").tickFormat(function(e){return e}),s;return d3.rebind(o,i,"orient","ticks","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(o,e,"domain","range","rangeBand","rangeBands"),o.axisLabel=function(e){return arguments.length?(t=e,o):t},o.showMaxMin=function(e){return arguments.length?(n=e,o):n},o.highlightZero=function(e){return arguments.length?(r=e,o):r},o.scale=function(t){return arguments.length?(e=t,i.scale(e),d3.rebind(o,e,"domain","range","rangeBand","rangeBands"),o):e},o},e.models.historicalBar=function(){function g(o){return o.each(function(o){var u=t-e.left-e.right,d=n-e.top-e.bottom;h.domain(l||d3.extent(o[0].values,i)).range([0,u]),p.domain(c||d3.extent(o[0].values,s)).range([d,0]);var v=d3.select(this).on("click",function(e,t){m.chartClick({data:e,index:t,pos:d3.event,id:r})}),g=d3.select(this).selectAll("g.wrap.bar").data([o[0].values]),b=g.enter().append("g").attr("class","wrap nvd3 bar"),w=b.append("g");w.append("g").attr("class","bars"),g.attr("width",t).attr("height",n);var E=g.select("g").attr("transform","translate("+e.left+","+e.top+")");b.append("defs").append("clipPath").attr("id","chart-clip-path-"+r).append("rect"),g.select("#chart-clip-path-"+r+" rect").attr("width",u).attr("height",d),w.attr("clip-path",a?"url(#chart-clip-path-"+r+")":"");var S=w.append("g").attr("class","shiftWrap"),T=g.select(".bars").selectAll(".bar").data(function(e){return e});T.exit().remove();var N=T.enter().append("svg:rect").attr("class",function(e,t){return s(e,t)<0?"bar negative":"bar positive"}).attr("fill",function(e,t){return f[0]}).attr("x",0).attr("y",function(e,t){return p(Math.max(0,s(e,t)))}).attr("height",function(e,t){return Math.abs(p(s(e,t))-p(0))}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({point:e,series:o[0],pos:[h(i(e,t)),p(s(e,t))],pointIndex:t,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout({point:e,series:o[0],pointIndex:t,seriesIndex:0,e:d3.event})}).on("click",function(e,t){m.elementClick({value:s(e,t),data:e,index:t,pos:[h(i(e,t)),p(s(e,t))],e:d3.event,id:r}),d3.event.stopPropagation()}).on("dblclick",function(e,t){m.elementDblClick({value:s(e,t),data:e,index:t,pos:[h(i(e,t)),p(s(e,t))],e:d3.event,id:r}),d3.event.stopPropagation()});T.attr("class",function(e,t){return s(e,t)<0?"bar negative":"bar positive"}).attr("transform",function(e,t){return"translate("+(h(i(e,t))-h(.5))+",0)"}).attr("width",h(.9)),d3.transition(T).attr("y",function(e,t){return p(Math.max(0,s(e,t)))}).attr("height",function(e,t){return Math.abs(p(s(e,t))-p(0))})}),g}var e={top:0,right:0,bottom:0,left:0},t=960,n=500,r=Math.floor(Math.random()*1e4),i=function(e){return e.x},s=function(e){return e.y},o=[],u=[],a=!0,f=d3.scale.category20().range(),l,c,h=d3.scale.linear(),p=d3.scale.linear(),d=d3.svg.axis().scale(h).orient("bottom"),v=d3.svg.axis().scale(p).orient("left"),m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return g.dispatch=m,g.x=function(e){return arguments.length?(i=e,g):i},g.y=function(e){return arguments.length?(s=e,g):s},g.margin=function(t){return arguments.length?(e=t,g):e},g.width=function(e){return arguments.length?(t=e,g):t},g.height=function(e){return arguments.length?(n=e,g):n},g.xScale=function(e){return arguments.length?(h=e,g):h},g.yScale=function(e){return arguments.length?(p=e,g):p},g.xDomain=function(e){return arguments.length?(l=e,g):l},g.yDomain=function(e){return arguments.length?(c=e,g):c},g.forceX=function(e){return arguments.length?(o=e,g):o},g.forceY=function(e){return arguments.length?(u=e,g):u},g.clipEdge=function(e){return arguments.length?(a=e,g):a},g.color=function(e){return arguments.length?(f=e,g):f},g.id=function(e){return arguments.length?(r=e,g):r},g},e.models.bullet=function(){function l(e){e.each(function(e,l){var c=r.call(this,e,l).slice().sort(d3.descending),h=i.call(this,e,l).slice().sort(d3.descending),p=s.call(this,e,l).slice().sort(d3.descending),d=d3.select(this),v=d3.scale.linear().domain([0,Math.max(c[0],h[0],p[0])]).range(t?[o,0]:[0,o]),m=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(v.range());this.__chart__=v;var g=function(e){return Math.abs(m(e)-m(0))},y=function(e){return Math.abs(v(e)-v(0))},b=d.selectAll("rect.range").data(c);b.enter().append("rect").attr("class",function(e,t){return"range s"+t}).attr("width",g).attr("height",u).attr("x",t?m:0).on("mouseover",function(e,t){f.elementMouseover({value:e,label:t<=0?"Maximum":t>1?"Minimum":"Mean",pos:[v(e),u/2]})}).on("mouseout",function(e,t){f.elementMouseout({value:e,label:t<=0?"Minimum":t>=1?"Maximum":"Mean"})}).transition().duration(n).attr("width",y).attr("x",t?v:0),b.transition().duration(n).attr("x",t?v:0).attr("width",y).attr("height",u);var w=d.selectAll("rect.measure").data(p);w.enter().append("rect").attr("class",function(e,t){return"measure s"+t}).attr("width",g).attr("height",u/3).attr("x",t?m:0).attr("y",u/3).on("mouseover",function(e){f.elementMouseover({value:e,label:"Current",pos:[v(e),u/2]})}).on("mouseout",function(e){f.elementMouseout({value:e,label:"Current"})}).transition().duration(n).attr("width",y).attr("x",t?v:0),w.transition().duration(n).attr("width",y).attr("height",u/3).attr("x",t?v:0).attr("y",u/3);var E=d.selectAll("path.markerTriangle").data(h),S=u/6;E.enter().append("path").attr("class","markerTriangle").attr("transform",function(e){return"translate("+m(e)+","+u/2+")"}).attr("d","M0,"+S+"L"+S+","+ -S+" "+ -S+","+ -S+"Z").on("mouseover",function(e,t){f.elementMouseover({value:e,label:"Previous",pos:[v(e),u/2]})}).on("mouseout",function(e,t){f.elementMouseout({value:e,label:"Previous"})}),E.transition().duration(n).attr("transform",function(e){return"translate("+v(e)+","+u/2+")"}),E.exit().remove();var x=a||v.tickFormat(8),T=d.selectAll("g.tick").data(v.ticks(8),function(e){return this.textContent||x(e)}),N=T.enter().append("g").attr("class","tick").attr("transform",function(e){return"translate("+m(e)+",0)"}).style("opacity",1e-6);N.append("line").attr("y1",u).attr("y2",u*7/6),N.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",u*7/6).text(x),N.transition().duration(n).attr("transform",function(e){return"translate("+v(e)+",0)"}).style("opacity",1);var C=T.transition().duration(n).attr("transform",function(e){return"translate("+v(e)+",0)"}).style("opacity",1);C.select("line").attr("y1",u).attr("y2",u*7/6),C.select("text").attr("y",u*7/6),T.exit().transition().duration(n).attr("transform",function(e){return"translate("+v(e)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush()}var e="left",t=!1,n=0,r=function(e){return e.ranges},i=function(e){return e.markers},s=function(e){return e.measures},o=380,u=30,a=null,f=d3.dispatch("elementMouseover","elementMouseout");return l.dispatch=f,l.orient=function(n){return arguments.length?(e=n,t=e=="right"||e=="bottom",l):e},l.ranges=function(e){return arguments.length?(r=e,l):r},l.markers=function(e){return arguments.length?(i=e,l):i},l.measures=function(e){return arguments.length?(s=e,l):s},l.width=function(e){return arguments.length?(o=e,l):o},l.height=function(e){return arguments.length?(u=e,l):u},l.tickFormat=function(e){return arguments.length?(a=e,l):a},l.duration=function(e){return arguments.length?(n=e,l):n},l},e.models.cumulativeLine=function(){function x(e,t){}function T(e,t){e.x+=d3.event.dx,e.i=Math.round(h.invert(e.x)),d3.select(this).attr("transform","translate("+h(e.i)+",0)")}function N(e,t){d3.transition(d3.select(".chart-"+a)).call(C)}function C(e){return e.each(function(s){var o=n(),u=r(),x=o-t.left-t.right,T=u-t.top-t.bottom,N=k(w.i,s),L=N.filter(function(e){return!l||!e.disabled}).map(function(e){return e.values});c.domain(d3.extent(d3.merge(L),function(e){return e.x})).range([0,x]),h.domain([0,s[0].values.length-1]).range([0,x]).clamp(!0),p.domain(d3.extent(d3.merge(L),function(e){return e.y})).range([T,0]),y.width(x).height(T).color(s.map(function(e,t){return e.color||i[t%i.length]}).filter(function(e,t){return!s[t].disabled}));var A=d3.select(this).classed("chart-"+a,!0).selectAll("g.wrap").data([N]),O=A.enter().append("g").attr("class","wrap nvd3 cumulativeLine").append("g");O.append("g").attr("class","x axis"),O.append("g").attr("class","y axis"),O.append("g").attr("class","linesWrap"),O.append("g").attr("class","legendWrap"),O.append("g").attr("class","controlsWrap"),t.top=m.height();var M=A.select("g").attr("transform","translate("+t.left+","+t.top+")");m.width(o/2-t.right),M.select(".legendWrap").datum(s).attr("transform","translate("+(o/2-t.left)+","+ -t.top+")").call(m),f&&(g.width(140).color(["#444","#444","#444"]),M.select(".controlsWrap").datum(E).attr("transform","translate(0,"+ -t.top+")").call(g));var _=M.select(".linesWrap").datum(N.filter(function(e){return!e.disabled}));d3.transition(_).call(y);var D=_.selectAll(".indexLine").data([w]);D.enter().append("rect").attr("class","indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).call(S),D.attr("transform",function(e){return"translate("+h(e.i)+",0)"}).attr("height",T),d.domain(c.domain()).range(c.range()).ticks(o/100).tickSize(-T,0),M.select(".x.axis").attr("transform","translate(0,"+p.range()[0]+")"),d3.transition(M.select(".x.axis")).call(d),v.domain(p.domain()).range(p.range()).ticks(u/36).tickSize(-x,0),d3.transition(M.select(".y.axis")).call(v),m.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,s.filter(function(e){return!e.disabled}).length||s.map(function(e){return e.disabled=!1,A.selectAll(".series").classed("disabled",!1),e}),e.transition().call(C)}),g.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,l=!t.disabled,e.transition().call(C)}),y.dispatch.on("elementMouseover.tooltip",function(e){b.tooltipShow({point:e.point,series:e.series,pos:[e.pos[0]+t.left,e.pos[1]+t.top],seriesIndex:e.seriesIndex,pointIndex:e.pointIndex})}),y.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)})}),C}function k(e,t){return t.map(function(t,n){var r=u(t.values[e],e);return{key:t.key,values:t.values.map(function(e,t){return{x:o(e,t),y:(u(e,t)-r)/(1+r)}}),disabled:t.disabled,hover:t.hover}})}var t={top:30,right:20,bottom:30,left:60},n=function(){return 960},r=function(){return 500},i=d3.scale.category20().range(),s=function(){return 2.5},o=function(e){return e.x},u=function(e){return e.y},a=Math.floor(Math.random()*1e4),f=!0,l=!0,c=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),d=e.models.axis().scale(c).orient("bottom"),v=e.models.axis().scale(p).orient("left"),m=e.models.legend().height(30),g=e.models.legend().height(30),y=e.models.line(),b=d3.dispatch("tooltipShow","tooltipHide"),w={i:0,x:0},E=[{key:"Re-scale y-axis"}],S=d3.behavior.drag().on("dragstart",x).on("drag",T).on("dragend",N);return C.dispatch=b,C.x=function(e){return arguments.length?(o=e,C):o},C.y=function(e){return arguments.length?(u=e,C):u},C.margin=function(e){return arguments.length?(t=e,C):t},C.width=function(e){return arguments.length?(n=d3.functor(e),C):n},C.height=function(e){return arguments.length?(r=d3.functor(e),C):r},C.color=function(e){return arguments.length?(i=e,m.color(e),C):i},C.dotRadius=function(e){return arguments.length?(s=d3.functor(e),y.dotRadius=e,C):s},C.showRescaleToggle=function(e){return arguments.length?(f=e,C):f},C.xAxis=d,C.yAxis=v,C},e.models.cumulativeLineChart=function(){function T(e,t){}function N(e,t){e.x+=d3.event.dx,e.i=Math.round(p.invert(e.x)),d3.select(this).attr("transform","translate("+p(e.i)+",0)")}function C(e,t){k.update()}function k(u){return u.each(function(T){var N=d3.select(this).classed("chart-"+d,!0),C=this,A=(r||parseInt(N.style("width"))||960)-t.left-t.right,O=(i||parseInt(N.style("height"))||400)-t.top-t.bottom,M=L(w.i,T);p.domain([0,T[0].values.length-1]).range([0,A]).clamp(!0);var _=N.selectAll("g.wrap.cumulativeLine").data([M]),D=_.enter().append("g").attr("class","wrap nvd3 cumulativeLine").append("g");D.append("g").attr("class","x axis"),D.append("g").attr("class","y axis"),D.append("g").attr("class","linesWrap"),D.append("g").attr("class","legendWrap"),D.append("g").attr("class","controlsWrap");var P=_.select("g");s&&(g.width(A),P.select(".legendWrap").datum(T).call(g),t.top!=g.height()&&(t.top=g.height(),O=(i||parseInt(N.style("height"))||400)-t.top-t.bottom),P.select(".legendWrap").attr("transform","translate(0,"+ -t.top+")")),a&&(y.width(140).color(["#444","#444","#444"]),P.select(".controlsWrap").datum(E).attr("transform","translate(0,"+ -t.top+")").call(y)),l.width(A).height(O).color(M.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!T[t].disabled})),P.attr("transform","translate("+t.left+","+t.top+")");var H=P.select(".linesWrap").datum(M.filter(function(e){return!e.disabled}));d3.transition(H).call(l);var B=H.selectAll(".indexLine").data([w]);B.enter().append("rect").attr("class","indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).call(x),B.attr("transform",function(e){return"translate("+p(e.i)+",0)"}).attr("height",O),v.scale(c).ticks(A/100).tickSize(-O,0),P.select(".x.axis").attr("transform","translate(0,"+h.range()[0]+")"),d3.transition(P.select(".x.axis")).call(v),m.scale(h).ticks(O/36).tickSize(-A,0),d3.transition(P.select(".y.axis")).call(m),y.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,f=!e.disabled,u.transition().call(k)}),g.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,_.selectAll(".series").classed("disabled",!1),e}),u.transition().call(k)}),l.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],b.tooltipShow(e)}),o&&b.on("tooltipShow",function(e){S(e,C.parentNode)}),l.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),o&&b.on("tooltipHide",e.tooltip.cleanup)}),k.update=function(){k(u)},k.container=this,k}function L(e,t){return t.map(function(t,n){var r=l.y()(t.values[e],e);return{key:t.key,values:t.values.map(function(e,t){return{x:l.x()(e,t),y:(l.y()(e,t)-r)/(1+r)}}),disabled:t.disabled,hover:t.hover}})}var t={top:30,right:20,bottom:50,left:60},n=d3.scale.category20().range(),r=null,i=null,s=!0,o=!0,u=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},a=!1,f=!0,l=e.models.line(),c=l.xScale(),h=l.yScale(),p=d3.scale.linear(),d=l.id(),v=e.models.axis().scale(c).orient("bottom").tickPadding(5),m=e.models.axis().scale(h).orient("left"),g=e.models.legend().height(30),y=e.models.legend().height(30),b=d3.dispatch("tooltipShow","tooltipHide"),w={i:0,x:0},E=[{key:"Re-scale y-axis"}],S=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=v.tickFormat()(l.x()(t.point)),o=m.tickFormat()(l.y()(t.point)),a=u(t.series.key,s,o,t,k);e.tooltip.show([r,i],a)},x=d3.behavior.drag().on("dragstart",T).on("drag",N).on("dragend",C);return k.dispatch=b,k.legend=g,k.xAxis=v,k.yAxis=m,d3.rebind(k,l,"x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),k.margin=function(e){return arguments.length?(t=e,k):t},k.width=function(e){return arguments.length?(r=e,k):r},k.height=function(e){return arguments.length?(i=e,k):i},k.color=function(e){return arguments.length?(n=e,g.color(e),k):n},k.showLegend=function(e){return arguments.length?(s=e,k):s},k.tooltips=function(e){return arguments.length?(o=e,k):o},k.tooltipContent=function(e){return arguments.length?(u=e,k):u},k},e.models.discreteBar=function(){function g(r){return r.each(function(b){var w=t-e.left-e.right,E=n-e.top-e.bottom;b=b.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var S=h&&p?[]:b.map(function(e){return e.values.map(function(e,t){return{x:o(e,t),y:u(e,t),y0:e.y0}})});i.domain(h||d3.merge(S).map(function(e){return e.x})).rangeBands([0,w],.1),s.domain(p||d3.extent(d3.merge(S).map(function(e){return e.y}).concat(a))),l?s.range([E-(s.domain()[0]<0?12:0),s.domain()[1]<0?0:12]):s.range([E,0]),d=d||i,v=v||d3.scale.linear().domain(s.domain()).range([s(0),s(0)]);var T=d3.select(this).selectAll("g.wrap.discretebar").data([b]),N=T.enter().append("g").attr("class","wrap nvd3 discretebar"),C=N.append("g");C.append("g").attr("class","groups");var k=T.select("g");T.attr("transform","translate("+e.left+","+e.top+")");var L=T.select(".groups").selectAll(".group").data(function(e){return e},function(e){return e.key});L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(L.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),L.attr("class",function(e,t){return"group series-"+t}).classed("hover",function(e){return e.hover}),d3.transition(L).style("stroke-opacity",1).style("fill-opacity",.75);var A=L.selectAll("g.bar").data(function(e){return e.values});A.exit().remove();var O=A.enter().append("g").attr("transform",function(e,t,n){return"translate("+i(o(e,t))+", "+s(0)+")"}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({value:u(e,t),point:e,series:b[e.series],pos:[i(o(e,t))+i.rangeBand()*(e.series+.5)/b.length,s(u(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout({value:u(e,t),point:e,series:b[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){m.elementClick({value:u(e,t),point:e,series:b[e.series],pos:[i(o(e,t))+i.rangeBand()*(e.series+.5)/b.length,s(u(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){m.elementDblClick({value:u(e,t),point:e,series:b[e.series],pos:[i(o(e,t))+i.rangeBand()*(e.series+.5)/b.length,s(u(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});O.append("rect").attr("height",0).attr("width",i.rangeBand()/b.length).style("fill",function(e,t){return e.color||f[t%f.length]}).style("stroke",function(e,t){return e.color||f[t%f.length]}),l?(O.append("text").attr("text-anchor","middle"),A.selectAll("text").attr("dx",i.rangeBand()/2).attr("dy",function(e,t){return u(e,t)<0?s(u(e,t))-s(0)+12:-4}).text(function(e,t){return c(u(e,t))})):A.selectAll("text").remove(),A.attr("class",function(e,t){return u(e,t)<0?"bar negative":"bar positive"}).attr("transform",function(e,t){return"translate("+i(o(e,t))+", "+(u(e,t)<0?v(0):v(u(e,t)))+")"}).selectAll("rect").attr("width",i.rangeBand()/b.length),d3.transition(A).attr("transform",function(e,t){return"translate("+i(o(e,t))+", "+(u(e,t)<0?s(0):s(u(e,t)))+")"}).selectAll("rect").attr("height",function(e,t){return Math.abs(s(u(e,t))-s(0))}),g.update=function(){r.transition().call(g)},d=i.copy(),v=s.copy()}),g}var e={top:0,right:0,bottom:0,left:0},t=960,n=500,r=Math.floor(Math.random()*1e4),i=d3.scale.ordinal(),s=d3.scale.linear(),o=function(e){return e.x},u=function(e){return e.y},a=[0],f=d3.scale.category20().range(),l=!1,c=d3.format(",.2f"),h,p,d,v,m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return g.dispatch=m,g.x=function(e){return arguments.length?(o=e,g):o},g.y=function(e){return arguments.length?(u=e,g):u},g.margin=function(t){return arguments.length?(e=t,g):e},g.width=function(e){return arguments.length?(t=e,g):t},g.height=function(e){return arguments.length?(n=e,g):n},g.xScale=function(e){return arguments.length?(i=e,g):i},g.yScale=function(e){return arguments.length?(s=e,g):s},g.xDomain=function(e){return arguments.length?(h=e,g):h},g.yDomain=function(e){return arguments.length?(p=e,g):p},g.forceY=function(e){return arguments.length?(a=e,g):a},g.color=function(e){return arguments.length?(f=e,g):f},g.id=function(e){return arguments.length?(r=e,g):r},g.showValues=function(e){return arguments.length?(l=e,g):l},g.valuesFormat=function(e){return arguments.length?(c=e,g):c},g},e.models.discreteBarChart=function(){function m(i){return i.each(function(u){var v=d3.select(this),g=this,b=(n||parseInt(v.style("width"))||960)-t.left-t.right,w=(r||parseInt(v.style("height"))||400)-t.top-t.bottom;a.width(b).height(w);var E=v.selectAll("g.wrap.discreteBarWithAxes").data([u]),S=E.enter().append("g").attr("class","wrap nvd3 discreteBarWithAxes").append("g"),T=S.append("defs");S.append("g").attr("class","x axis"),S.append("g").attr("class","y axis"),S.append("g").attr("class","barsWrap");var N=E.select("g");N.attr("transform","translate("+t.left+","+t.top+")");var C=N.select(".barsWrap").datum(u.filter(function(e){return!e.disabled}));d3.transition(C).call(a),T.append("clipPath").attr("id","x-label-clip-"+a.id()).append("rect"),N.select("#x-label-clip-"+a.id()+" rect").attr("width",f.rangeBand()*(s?2:1)).attr("height",16).attr("x",-f.rangeBand()/(s?1:2)),c.ticks(b/100).tickSize(-w,0),N.select(".x.axis").attr("transform","translate(0,"+(l.range()[0]+(a.showValues()?16:0))+")"),N.select(".x.axis").transition().duration(0).call(c);var k=N.select(".x.axis").selectAll("g");s&&k.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"0":"12")+")"}),k.selectAll("text").attr("clip-path",function(e,t,n){return"url(#x-label-clip-"+a.id()+")"}),h.ticks(w/36).tickSize(-b,0),d3.transition(N.select(".y.axis")).call(h),a.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],p.tooltipShow(e)}),o&&p.on("tooltipShow",function(e){d(e,g.parentNode)}),a.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),o&&p.on("tooltipHide",e.tooltip.cleanup),m.update=function(){i.transition().call(m)},m.container=this}),m}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=d3.scale.category20().range(),s=!1,o=!0,u=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},a=e.models.discreteBar(),f=a.xScale(),l=a.yScale(),c=e.models.axis().scale(f).orient("bottom").highlightZero(!1).showMaxMin(!1),h=e.models.axis().scale(l).orient("left"),p=d3.dispatch("tooltipShow","tooltipHide");c.tickFormat(function(e){return e}),h.tickFormat(d3.format(",.1f"));var d=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=c.tickFormat()(a.x()(t.point)),o=h.tickFormat()(a.y()(t.point)),f=u(t.series.key,s,o,t,m);e.tooltip.show([r,i],f,t.value<0?"n":"s")},v=[{key:"Grouped"},{key:"Stacked",disabled:!0}];return m.dispatch=p,m.discretebar=a,m.xAxis=c,m.yAxis=h,d3.rebind(m,a,"x","y","xDomain","yDomain","forceX","forceY","id","showValues","valueFormat"),m.margin=function(e){return arguments.length?(t=e,m):t},m.width=function(e){return arguments.length?(n=e,m):n},m.height=function(e){return arguments.length?(r=e,m):r},m.color=function(e){return arguments.length?(i=e,a.color(e),m):i},m.staggerLabels=function(e){return arguments.length?(s=e,m):s},m.tooltips=function(e){return arguments.length?(o=e,m):o},m.tooltipContent=function(e){return arguments.length?(u=e,m):u},m},e.models.distribution=function(){function f(o){return o.each(function(o){var f=t-(r==="x"?e.left+e.right:e.top+e.bottom),l=r=="x"?"y":"x";a=a||u;var c=d3.select(this).selectAll("g.distribution").data([o]),h=c.enter().append("g").attr("class","nvd3 distribution"),p=h.append("g"),d=c.select("g");c.attr("transform","translate("+e.left+","+e.top+")");var v=d.selectAll("g.dist").data(function(e){return e},function(e){return e.key});v.enter().append("g"),v.attr("class",function(e,t){return"dist series-"+t}).style("stroke",function(e,t){return s[t%s.length]});var m=v.selectAll("line.dist"+r).data(function(e){return e.values});m.enter().append("line").attr(r+"1",function(e,t){return a(i(e,t))}).attr(r+"2",function(e,t){return a(i(e,t))}),d3.transition(v.exit().selectAll("line.dist"+r)).attr(r+"1",function(e,t){return u(i(e,t))}).attr(r+"2",function(e,t){return u(i(e,t))}).style("stroke-opacity",0).remove(),m.attr("class",function(e,t){return"dist"+r+" dist"+r+"-"+t}).attr(l+"1",0).attr(l+"2",n),d3.transition(m).attr(r+"1",function(e,t){return u(i(e,t))}).attr(r+"2",function(e,t){return u(i(e,t))}),a=u.copy()}),f}var e={top:0,right:0,bottom:0,left:0},t=400,n=8,r="x",i=function(e){return e[r]},s=d3.scale.category20().range(),o,u=d3.scale.linear(),a;return f.margin=function(t){return arguments.length?(e=t,f):e},f.width=function(e){return arguments.length?(t=e,f):t},f.axis=function(e){return arguments.length?(r=e,f):r},f.size=function(e){return arguments.length?(n=e,f):n},f.getData=function(e){return arguments.length?(i=d3.functor(e),f):i},f.scale=function(e){return arguments.length?(u=e,f):u},f.color=function(e){return arguments.length?(s=e,f):s},f},e.models.legend=function(){function o(u){return u.each(function(o){var u=t-e.left-e.right,a=d3.select(this).selectAll("g.legend").data([o]),f=a.enter().append("g").attr("class","nvd3 legend").append("g"),l=a.select("g").attr("transform","translate("+e.left+","+e.top+")"),c=l.selectAll(".series").data(function(e){return e}),h=c.enter().append("g").attr("class","series").on("mouseover",function(e,t){s.legendMouseover(e,t)}).on("mouseout",function(e,t){s.legendMouseout(e,t)}).on("click",function(e,t){s.legendClick(e,t)}).on("dblclick",function(e,t){s.legendDblclick(e,t)});h.append("circle").style("fill",function(e,t){return e.color||r[t%r.length]}).style("stroke",function(e,t){return e.color||r[t%r.length]}).style("stroke-width",2).attr("r",5),h.append("text").text(function(e){return e.key}).attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),c.classed("disabled",function(e){return e.disabled}),c.exit().remove();if(i){var p=[];c.each(function(e,t){p.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var d=0,v=0,m=[];while(v<u&&d<p.length)m[d]=p[d],v+=p[d++];while(v>u&&d>1){m=[],d--;for(k=0;k<p.length;k++)p[k]>(m[k%d]||0)&&(m[k%d]=p[k]);v=m.reduce(function(e,t,n,r){return e+t})}var g=[];for(var y=0,b=0;y<d;y++)g[y]=b,b+=m[y];c.attr("transform",function(e,t){return"translate("+g[t%d]+","+(5+Math.floor(t/d)*20)+")"}),l.attr("transform","translate("+(t-e.right-v)+","+e.top+")"),n=e.top+e.bottom+Math.ceil(p.length/d)*20}else{var w=5,E=5,S=0,x;
c.attr("transform",function(n,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return x=E,t<e.left+e.right+x+i&&(E=x=5,w+=20),E+=i,E>S&&(S=E),"translate("+x+","+w+")"}),l.attr("transform","translate("+(t-e.right-S)+","+e.top+")"),n=e.top+e.bottom+w+15}}),o}var e={top:5,right:0,bottom:5,left:0},t=400,n=20,r=d3.scale.category20().range(),i=!0,s=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");return o.dispatch=s,o.margin=function(t){return arguments.length?(e=t,o):e},o.width=function(e){return arguments.length?(t=e,o):t},o.height=function(e){return arguments.length?(n=e,o):n},o.color=function(e){return arguments.length?(r=e,o):r},o.align=function(e){return arguments.length?(i=e,o):i},o},e.models.line=function(){function v(e){return e.each(function(e){var d=n-t.left-t.right,v=r-t.top-t.bottom;l=l||f.xScale(),c=c||f.yScale(),h=h||l,p=p||c;var m=d3.select(this).selectAll("g.wrap.line").data([e]),g=m.enter().append("g").attr("class","wrap nvd3 line"),b=g.append("defs"),w=g.append("g"),E=m.select("g");w.append("g").attr("class","groups"),w.append("g").attr("class","scatterWrap"),b.append("clipPath").attr("id","edge-clip-"+s).append("rect"),m.select("#edge-clip-"+s+" rect").attr("width",d).attr("height",v);var S=m.select(".scatterWrap");f.width(d).height(v),d3.transition(S).call(f),m.attr("transform","translate("+t.left+","+t.top+")"),E.attr("clip-path",a?"url(#edge-clip-"+s+")":""),S.attr("clip-path",a?"url(#edge-clip-"+s+")":"");var T=m.select(".groups").selectAll(".group").data(function(e){return e},function(e){return e.key});T.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(T.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),T.attr("class",function(e,t){return"group series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return i[t%i.length]}).style("stroke",function(e,t){return i[t%i.length]}),d3.transition(T).style("stroke-opacity",1).style("fill-opacity",.5);var N=T.selectAll("path").data(function(e,t){return[e.values]});N.enter().append("path").attr("class","line").attr("d",d3.svg.line().x(function(e,t){return h(o(e,t))}).y(function(e,t){return p(u(e,t))})),d3.transition(T.exit().selectAll("path")).attr("d",d3.svg.line().x(function(e,t){return l(o(e,t))}).y(function(e,t){return c(u(e,t))})).remove(),d3.transition(N).attr("d",d3.svg.line().x(function(e,t){return l(o(e,t))}).y(function(e,t){return c(u(e,t))})),h=l.copy(),p=c.copy()}),v}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.category20().range(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},u=function(e){return e.y},a=!1,f=e.models.scatter().id(s).size(16).sizeDomain([16,256]),l,c,h,p,d;return v.dispatch=f.dispatch,d3.rebind(v,f,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),v.margin=function(e){return arguments.length?(t=e,v):t},v.width=function(e){return arguments.length?(n=e,v):n},v.height=function(e){return arguments.length?(r=e,v):r},v.x=function(e){return arguments.length?(o=e,f.x(e),v):o},v.y=function(e){return arguments.length?(u=e,f.y(e),v):u},v.clipEdge=function(e){return arguments.length?(a=e,v):a},v.color=function(e){return arguments.length?(i=e,f.color(e),v):i},v.id=function(e){return arguments.length?(s=e,v):s},v},e.models.indentedTree=function(){function a(r){return r.each(function(i){function T(e,t,n){d3.event.stopPropagation();if(d3.event.shiftKey&&!n)return d3.event.shiftKey=!1,e.values&&e.values.forEach(function(e){(e.values||e._values)&&T(e,0,!0)}),!0;if(!k(e))return!0;e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),a.update()}function N(e){return e._values&&e._values.length?iconOpen:e.values&&e.values.length?iconClose:""}function C(e){return e._values&&e._values.length}function k(e){var t=e.values||e._values;return t&&t.length}var f=t-e.left-e.right,l=n-e.top-e.bottom;a.update=function(){r.transition().call(a)};var c=0,h=1,p=d3.layout.tree().children(function(e){return e.values}).size([n,childIndent]);i[0].key||(i[0].key=o);var d=p.nodes(i[0]),v=d3.select(this).selectAll("div").data([[d]]),m=v.enter().append("div").attr("class","wrap nvd3 indentedtree"),g=m.append("table"),y=v.select("table").attr("width","100%").attr("class",tableClass);if(s){var b=g.append("thead"),w=b.append("tr");columns.forEach(function(e){w.append("th").attr("width",e.width?e.width:"10%").style("text-align",e.type=="numeric"?"right":"left").append("span").text(e.label)})}var E=y.selectAll("tbody").data(function(e){return e});E.enter().append("tbody"),h=d3.max(d,function(e){return e.depth}),p.size([n,h*childIndent]);var S=E.selectAll("tr").data(function(e){return e},function(e){return e.id||e.id==++c});S.exit().remove(),S.select("img.treeicon").attr("src",N).classed("folded",C);var x=S.enter().append("tr");columns.forEach(function(e,t){var n=x.append("td").style("padding-left",function(e){return(t?0:e.depth*childIndent+12+(N(e)?0:16))+"px"},"important").style("text-align",e.type=="numeric"?"right":"left");t==0&&n.append("img").classed("treeicon",!0).classed("folded",C).attr("src",N).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(e){return N(e)?"inline-block":"none"}).on("click",T),n.append("span").attr("class",d3.functor(e.classes)).text(function(t){return e.format?e.format(t):t[e.key]||"-"}),e.showCount&&n.append("span").attr("class","childrenCount").text(function(e){return e.values&&e.values.length||e._values&&e._values.length?"("+(e.values&&e.values.length||e._values&&e._values.length)+")":""}),e.click&&n.select("span").on("click",e.click)}),S.order().on("click",function(e){u.elementClick({row:this,data:e,pos:[e.x,e.y]})}).on("dblclick",function(e){u.elementDblclick({row:this,data:e,pos:[e.x,e.y]})}).on("mouseover",function(e){u.elementMouseover({row:this,data:e,pos:[e.x,e.y]})}).on("mouseout",function(e){u.elementMouseout({row:this,data:e,pos:[e.x,e.y]})})}),a}var e={top:0,right:0,bottom:0,left:0},t=960,n=500,r=d3.scale.category20().range(),i=Math.floor(Math.random()*1e4),s=!0,o="No Results found.";childIndent=20,columns=[{key:"key",label:"Name",type:"text"}],tableClass=null,iconOpen="images/grey-plus.png",iconClose="images/grey-minus.png";var u=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout");return a.margin=function(t){return arguments.length?(e=t,a):e},a.width=function(e){return arguments.length?(t=e,a):t},a.height=function(e){return arguments.length?(n=e,a):n},a.color=function(e){return arguments.length?(r=e,scatter.color(e),a):r},a.id=function(e){return arguments.length?(i=e,a):i},a.header=function(e){return arguments.length?(s=e,a):s},a.noResultsText=function(e){return arguments.length?(o=e,a):o},a.columns=function(e){return arguments.length?(columns=e,a):columns},a.tableClass=function(e){return arguments.length?(tableClass=e,a):tableClass},a},e.models.lineChart=function(){function m(u){return u.each(function(f){var g=d3.select(this),b=this,w=(r||parseInt(g.style("width"))||960)-t.left-t.right,E=(i||parseInt(g.style("height"))||400)-t.top-t.bottom,S=g.selectAll("g.wrap.lineChart").data([f]),x=S.enter().append("g").attr("class","wrap nvd3 lineChart").append("g");x.append("g").attr("class","x axis"),x.append("g").attr("class","y axis"),x.append("g").attr("class","linesWrap"),x.append("g").attr("class","legendWrap");var T=S.select("g");s&&(p.width(w),T.select(".legendWrap").datum(f).call(p),t.top!=p.height()&&(t.top=p.height(),E=(i||parseInt(g.style("height"))||400)-t.top-t.bottom),T.select(".legendWrap").attr("transform","translate(0,"+ -t.top+")")),a.width(w).height(E).color(f.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!f[t].disabled})),T.attr("transform","translate("+t.left+","+t.top+")");var N=T.select(".linesWrap").datum(f.filter(function(e){return!e.disabled}));d3.transition(N).call(a),c.ticks(w/100).tickSize(-E,0),T.select(".x.axis").attr("transform","translate(0,"+l.range()[0]+")"),d3.transition(T.select(".x.axis")).call(c),h.ticks(E/36).tickSize(-w,0),d3.transition(T.select(".y.axis")).call(h),p.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,f.filter(function(e){return!e.disabled}).length||f.map(function(e){return e.disabled=!1,S.selectAll(".series").classed("disabled",!1),e}),u.transition().call(m)}),a.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],d.tooltipShow(e)}),o&&d.on("tooltipShow",function(e){v(e,b.parentNode)}),a.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),o&&d.on("tooltipHide",e.tooltip.cleanup)}),m.update=function(){m(u)},m.container=this,m}var t={top:30,right:20,bottom:50,left:60},n=d3.scale.category20().range(),r=null,i=null,s=!0,o=!0,u=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},a=e.models.line(),f=a.xScale(),l=a.yScale(),c=e.models.axis().scale(f).orient("bottom").tickPadding(5),h=e.models.axis().scale(l).orient("left"),p=e.models.legend().height(30),d=d3.dispatch("tooltipShow","tooltipHide"),v=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=c.tickFormat()(a.x()(t.point)),o=h.tickFormat()(a.y()(t.point)),f=u(t.series.key,s,o,t,m);e.tooltip.show([r,i],f)};return m.dispatch=d,m.legend=p,m.xAxis=c,m.yAxis=h,d3.rebind(m,a,"x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),m.margin=function(e){return arguments.length?(t=e,m):t},m.width=function(e){return arguments.length?(r=e,m):r},m.height=function(e){return arguments.length?(i=e,m):i},m.color=function(e){return arguments.length?(n=e,p.color(e),m):n},m.showLegend=function(e){return arguments.length?(s=e,m):s},m.tooltips=function(e){return arguments.length?(o=e,m):o},m.tooltipContent=function(e){return arguments.length?(u=e,m):u},m},e.models.linePlusBarChart=function(){function E(f){return f.each(function(d){var S=d3.select(this),T=this,N=(n||parseInt(S.style("width"))||960)-t.left-t.right,C=(r||parseInt(S.style("height"))||400)-t.top-t.bottom,k=d.filter(function(e){return!e.disabled&&e.bar}),L=d.filter(function(e){return!e.disabled&&!e.bar}),A=d.filter(function(e){return!e.disabled&&e.bar}).map(function(e){return e.values.map(function(e,t){return{x:i(e,t),y:s(e,t)}})}),O=d.filter(function(e){return!e.disabled&&!e.bar}).map(function(e){return e.values.map(function(e,t){return{x:i(e,t),y:s(e,t)}})});h.domain(d3.extent(d3.merge(A.concat(O)),function(e){return e.x})).range([0,N]),l.width(N).height(C).color(d.map(function(e,t){return e.color||o[t%o.length]}).filter(function(e,t){return!d[t].disabled&&!d[t].bar})),c.width(N).height(C).color(d.map(function(e,t){return e.color||o[t%o.length]}).filter(function(e,t){return!d[t].disabled&&d[t].bar}));var M=d3.select(this).selectAll("g.wrap.linePlusBar").data([d]),_=M.enter().append("g").attr("class","wrap nvd3 linePlusBar").append("g");_.append("g").attr("class","x axis"),_.append("g").attr("class","y1 axis"),_.append("g").attr("class","y2 axis"),_.append("g").attr("class","barsWrap"),_.append("g").attr("class","linesWrap"),_.append("g").attr("class","legendWrap");var D=M.select("g");u&&(y.width(N),D.select(".legendWrap").datum(d.map(function(e){return e.key=e.key+(e.bar?" (left axis)":" (right axis)"),e})).call(y),t.top!=y.height()&&(t.top=y.height(),C=(r||parseInt(S.style("height"))||400)-t.top-t.bottom),D.select(".legendWrap").attr("transform","translate(0,"+ -t.top+")"));var P=D.select(".barsWrap").datum(k.length?k:[{values:[]}]),H=D.select(".linesWrap").datum(L.length?L:[{values:[]}]);d3.transition(P).call(c),d3.transition(H).call(l),D.attr("transform","translate("+t.left+","+t.top+")"),v.ticks(N/100).tickSize(-C,0),D.select(".x.axis").attr("transform","translate(0,"+p.range()[0]+")"),d3.transition(D.select(".x.axis")).call(v),m.ticks(C/36).tickSize(-N,0),d3.transition(D.select(".y1.axis")).call(m),g.ticks(C/36).tickSize(k.length?0:-N,0),D.select(".y2.axis").attr("transform","translate("+h.range()[1]+",0)"),d3.transition(D.select(".y2.axis")).call(g),y.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,d.filter(function(e){return!e.disabled}).length||d.map(function(e){return e.disabled=!1,M.selectAll(".series").classed("disabled",!1),e}),f.transition().call(E)}),l.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],b.tooltipShow(e)}),a&&b.on("tooltipShow",function(e){w(e,T.parentNode)}),l.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),a&&b.on("tooltipHide",e.tooltip.cleanup),c.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],b.tooltipShow(e)}),a&&b.on("tooltipShow",function(e){w(e,T.parentNode)}),c.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),a&&b.on("tooltipHide",e.tooltip.cleanup),E.update=function(){f.transition().call(E)},E.container=this}),E}var t={top:30,right:60,bottom:50,left:60},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=d3.scale.category20().range(),u=!0,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},l=e.models.line(),c=e.models.historicalBar(),h=d3.scale.linear(),p=c.yScale(),d=l.yScale(),v=e.models.axis().scale(h).orient("bottom").tickPadding(5),m=e.models.axis().scale(p).orient("left"),g=e.models.axis().scale(d).orient("right"),y=e.models.legend().height(30),b=d3.dispatch("tooltipShow","tooltipHide"),w=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=v.tickFormat()(l.x()(t.point)),o=m.tickFormat()(l.y()(t.point)),u=f(t.series.key,s,o,t,E);e.tooltip.show([r,i],u,t.value<0?"n":"s")};return E.dispatch=b,E.legend=y,E.lines=l,E.bars=c,E.xAxis=v,E.yAxis1=m,E.yAxis2=g,d3.rebind(E,l,"size","clipVoronoi"),E.x=function(e){return arguments.length?(i=e,l.x(e),c.x(e),E):i},E.y=function(e){return arguments.length?(s=e,l.y(e),c.y(e),E):s},E.margin=function(e){return arguments.length?(t=e,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.color=function(e){return arguments.length?(o=e,y.color(e),E):o},E.showLegend=function(e){return arguments.length?(u=e,E):u},E.tooltips=function(e){return arguments.length?(a=e,E):a},E.tooltipContent=function(e){return arguments.length?(f=e,E):f},E},e.models.lineWithFocusChart=function(){function T(f){return f.each(function(N){function F(e){var t=+(e=="e"),n=t?1:-1,r=O/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function I(){q(),B.call(l),H.select(".focus .x.axis").call(m),H.select(".focus .y.axis").call(g)}function q(){var e=S.empty()?v.domain():d3.extent(d3.merge(N.filter(function(e){return!e.disabled}).map(function(e){return e.values})).filter(function(e){return l.x()(e)>=S.extent()[0]&&l.x()(e)<=S.extent()[1]}),l.y());typeof e[0]=="undefined"&&(e=v.domain()),h.domain(S.empty()?d.domain():S.extent()),p.domain(e),l.xDomain(h.domain()),l.yDomain(p.domain())}var C=d3.select(this),k=this,L=(i||parseInt(C.style("width"))||960)-t.left-t.right,A=(s||parseInt(C.style("height"))||400)-t.top-t.bottom-o,O=o-n.top-n.bottom;S.on("brush",I);var M=C.selectAll("g.wrap.lineWithFocusChart").data([N]),_=M.enter().append("g").attr("class","wrap nvd3 lineWithFocusChart").append("g"),D=_.append("g").attr("class","focus");D.append("g").attr("class","x axis"),D.append("g").attr("class","y axis"),D.append("g").attr("class","linesWrap");var P=_.append("g").attr("class","context");P.append("g").attr("class","x axis"),P.append("g").attr("class","y axis"),P.append("g").attr("class","linesWrap"),P.append("g").attr("class","x brush"),_.append("g").attr("class","legendWrap");var H=M.select("g");u&&(w.width(L),H.select(".legendWrap").datum(N).call(w),t.top!=w.height()&&(t.top=w.height(),A=(s||parseInt(C.style("height"))||400)-t.top-t.bottom),H.select(".legendWrap").attr("transform","translate(0,"+ -t.top+")")),l.width(L).height(A).color(N.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!N[t].disabled})),c.width(L).height(O).color(N.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!N[t].disabled})),H.attr("transform","translate("+t.left+","+t.top+")");var B=H.select(".focus .linesWrap").datum(N.filter(function(e){return!e.disabled}));d3.transition(B).call(l),m.ticks(L/100).tickSize(-A,0),H.select(".focus .x.axis").attr("transform","translate(0,"+p.range()[0]+")"),d3.transition(H.select(".focus .x.axis")).call(m),g.ticks(A/36).tickSize(-L,0),d3.transition(H.select(".focus .y.axis")).call(g),H.select(".context").attr("transform","translate(0,"+(A+t.bottom+n.top)+")");var j=H.select(".context .linesWrap").datum(N.filter(function(e){return!e.disabled}));d3.transition(j).call(c),gBrush=H.select(".x.brush").call(S),gBrush.selectAll("rect").attr("height",O),gBrush.selectAll(".resize").append("path").attr("d",F),y.tickFormat(m.tickFormat()).ticks(L/100).tickSize(-O,0),H.select(".context .x.axis").attr("transform","translate(0,"+v.range()[0]+")"),d3.transition(H.select(".context .x.axis")).call(y),b.tickFormat(g.tickFormat()).ticks(O/36).tickSize(-L,0),d3.transition(H.select(".context .y.axis")).call(b),q(),w.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,N.filter(function(e){return!e.disabled}).length||N.map(function(e){return e.disabled=!1,M.selectAll(".series").classed("disabled",!1),e}),f.transition().call(T)}),l.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],E.tooltipShow(e)}),a&&E.on("tooltipShow",function(e){x(e,k.parentNode)}),l.dispatch.on("elementMouseout.tooltip",function(e){E.tooltipHide(e)}),a&&E.on("tooltipHide",e.tooltip.cleanup)}),T.update=function(){T(f)},T.container=this,T}var t={top:30,right:20,bottom:50,left:60},n={top:0,right:20,bottom:20,left:60},r=d3.scale.category20().range(),i=null,s=null,o=100,u=!0,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},l=e.models.line().clipEdge(!0),c=e.models.line().interactive(!1),h=l.xScale(),p=l.yScale(),d=c.xScale(),v=c.yScale(),m=e.models.axis().scale(h).orient("bottom").tickPadding(5),g=e.models.axis().scale(p).orient("left"),y=e.models.axis().scale(h).orient("bottom").tickPadding(5),b=e.models.axis().scale(v).orient("left"),w=e.models.legend().height(30),E=d3.dispatch("tooltipShow","tooltipHide"),S=d3.svg.brush().x(d),x=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=m.tickFormat()(l.x()(t.point)),o=g.tickFormat()(l.y()(t.point)),u=f(t.series.key,s,o,t,T);e.tooltip.show([r,i],u)};return T.dispatch=E,T.legend=w,T.xAxis=m,T.yAxis=g,d3.rebind(T,l,"x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),T.margin=function(e){return arguments.length?(t=e,T):t},T.width=function(e){return arguments.length?(i=e,T):i},T.height=function(e){return arguments.length?(s=e,T):s},T.color=function(e){return arguments.length?(r=e,w.color(e),T):r},T.showLegend=function(e){return arguments.length?(u=e,T):u},T.tooltips=function(e){return arguments.length?(a=e,T):a},T.tooltipContent=function(e){return arguments.length?(f=e,T):f},T},e.models.multiBar=function(){function y(b){return b.each(function(w){var E=t-e.left-e.right,S=n-e.top-e.bottom;p=p||v,d=d||m,a&&(w=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(s)(w)),w=w.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var T=c&&h?[]:w.map(function(e){return e.values.map(function(e,t){return{x:i(e,t),y:s(e,t),y0:e.y0}})});v.domain(d3.merge(T).map(function(e){return e.x})).rangeBands([0,E],.1),m.domain(h||d3.extent(d3.merge(T).map(function(e){return e.y+(a?e.y0:0)}).concat(o))).range([S,0]);var N=d3.select(this).selectAll("g.wrap.multibar").data([w]),C=N.enter().append("g").attr("class","wrap nvd3 multibar"),k=C.append("defs"),L=C.append("g");L.append("g").attr("class","groups");var A=N.select("g");N.attr("transform","translate("+e.left+","+e.top+")"),k.append("clipPath").attr("id","edge-clip-"+r).append("rect"),N.select("#edge-clip-"+r+" rect").attr("width",E).attr("height",S),A.attr("clip-path",u?"url(#edge-clip-"+r+")":"");var O=N.select(".groups").selectAll(".group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(O.exit()).selectAll("rect.bar").delay(function(e,t){return t*l/w[0].values.length}).attr("y",function(e){return a?d(e.y0):d(0)}).attr("height",0).remove(),O.attr("class",function(e,t){return"group series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return f[t%f.length]}).style("stroke",function(e,t){return f[t%f.length]}),d3.transition(O).style("stroke-opacity",1).style("fill-opacity",.75);var M=O.selectAll("rect.bar").data(function(e){return e.values});M.exit().remove();var _=M.enter().append("rect").attr("class",function(e,t){return s(e,t)<0?"bar negative":"bar positive"}).attr("x",function(e,t,n){return a?0:n*v.rangeBand()/w.length}).attr("y",function(e){return d(a?e.y0:0)}).attr("height",0).attr("width",v.rangeBand()/(a?1:w.length)).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({value:s(e,t),point:e,series:w[e.series],pos:[v(i(e,t))+v.rangeBand()*(a?w.length/2:e.series+.5)/w.length,m(s(e,t)+(a?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout({value:s(e,t),point:e,series:w[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){g.elementClick({value:s(e,t),point:e,series:w[e.series],pos:[v(i(e,t))+v.rangeBand()*(a?w.length/2:e.series+.5)/w.length,m(s(e,t)+(a?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){g.elementDblClick({value:s(e,t),point:e,series:w[e.series],pos:[v(i(e,t))+v.rangeBand()*(a?w.length/2:e.series+.5)/w.length,m(s(e,t)+(a?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});M.attr("class",function(e,t){return s(e,t)<0?"bar negative":"bar positive"}).attr("transform",function(e,t){return"translate("+v(i(e,t))+",0)"}),a?d3.transition(M).delay(function(e,t){return t*l/w[0].values.length}).attr("y",function(e,t){return m(s(e,t)+(a?e.y0:0))}).attr("height",function(e,t){return Math.abs(m(e.y+(a?e.y0:0))-m(a?e.y0:0))}).each("end",function(){d3.transition(d3.select(this)).attr("x",function(e,t){return a?0:e.series*v.rangeBand()/w.length}).attr("width",v.rangeBand()/(a?1:w.length))}):d3.transition(M).delay(function(e,t){return t*l/w[0].values.length}).attr("x",function(e,t){return e.series*v.rangeBand()/w.length}).attr("width",v.rangeBand()/w.length).each("end",function(){d3.transition(d3.select(this)).attr("y",function(e,t){return s(e,t)<0?m(0):m(s(e,t))}).attr("height",function(e,t){return Math.abs(m(s(e,t))-m(0))})}),y.update=function(){b.transition().call(y)},p=v.copy(),d=m.copy()}),y}var e={top:0,right:0,bottom:0,left:0},t=960,n=500,r=Math.floor(Math.random()*1e4),i=function(e){return e.x},s=function(e){return e.y},o=[0],u=!0,a=!1,f=d3.scale.category20().range(),l=1200,c,h,p,d,v=d3.scale.ordinal(),m=d3.scale.linear(),g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return y.dispatch=g,y.x=function(e){return arguments.length?(i=e,y):i},y.y=function(e){return arguments.length?(s=e,y):s},y.margin=function(t){return arguments.length?(e=t,y):e},y.width=function(e){return arguments.length?(t=e,y):t},y.height=function(e){return arguments.length?(n=e,y):n},y.xScale=function(e){return arguments.length?(v=e,y):v},y.yScale=function(e){return arguments.length?(m=e,y):m},y.xDomain=function(e){return arguments.length?(c=e,y):c},y.yDomain=function(e){return arguments.length?(h=e,y):h},y.forceY=function(e){return arguments.length?(o=e,y):o},y.stacked=function(e){return arguments.length?(a=e,y):a},y.clipEdge=function(e){return arguments.length?(u=e,y):u},y.color=function(e){return arguments.length?(f=e,y):f},y.id=function(e){return arguments.length?(r=e,y):r},y.delay=function(e){return arguments.length?(l=e,y):l},y},e.models.multiBarChart=function(){function b(a){return a.each(function(l){var w=d3.select(this),E=this,S=(n||parseInt(w.style("width"))||960)-t.left-t.right,x=(r||parseInt(w.style("height"))||400)-t.top-t.bottom,T=w.selectAll("g.wrap.multiBarWithLegend").data([l]),N=T.enter().append("g").attr("class","wrap nvd3 multiBarWithLegend").append("g");N.append("g").attr("class","x axis"),N.append("g").attr("class","y axis"),N.append("g").attr("class","barsWrap"),N.append("g").attr("class","legendWrap"),N.append("g").attr("class","controlsWrap");var C=T.select("g");o&&(d.width(S/2),C.select(".legendWrap").datum(l).call(d),t.top!=d.height()&&(t.top=d.height(),x=(r||parseInt(w.style("height"))||400)-t.top-t.bottom),C.select(".legendWrap").attr("transform","translate("+S/2+","+ -t.top+")")),f.width(S).height(x).color(l.map(function(e,t){return e.color||i[t%i.length]}).filter(function(e,t){return!l[t].disabled})),s&&(v.width(180).color(["#444","#444","#444"]),C.select(".controlsWrap").datum(y).attr("transform","translate(0,"+ -t.top+")").call(v)),C.attr("transform","translate("+t.left+","+t.top+")");var k=C.select(".barsWrap").datum(l.filter(function(e){return!e.disabled}));d3.transition(k).call(f),h.ticks(S/100).tickSize(-x,0),C.select(".x.axis").attr("transform","translate(0,"+c.range()[0]+")"),d3.transition(C.select(".x.axis")).call(h);var L=C.select(".x.axis").selectAll("g");L.selectAll("line, text").style("opacity",1),L.filter(function(e,t){return t%Math.ceil(l[0].values.length/(S/100))!==0}).selectAll("line, text").style("opacity",0),p.ticks(x/36).tickSize(-S,0),d3.transition(C.select(".y.axis")).call(p),d.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,l.filter(function(e){return!e.disabled}).length||l.map(function(e){return e.disabled=!1,T.selectAll(".series").classed("disabled",!1),e}),a.transition().call(b)}),v.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;y=y.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":f.stacked(!1);break;case"Stacked":f.stacked(!0)}a.transition().call(b)}),f.dispatch.on("elementMouseover.tooltip2",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],m.tooltipShow(e)}),u&&m.on("tooltipShow",function(e){g(e,E.parentNode)}),f.dispatch.on("elementMouseout.tooltip",function(e){m.tooltipHide(e)}),u&&m.on("tooltipHide",e.tooltip.cleanup),b.update=function(){a.transition().call(b)},b.container=this}),b}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=d3.scale.category20().range(),s=!0,o=!0,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},f=e.models.multiBar().stacked(!1),l=f.xScale(),c=f.yScale(),h=e.models.axis().scale(l).orient("bottom").highlightZero(!1),p=e.models.axis().scale(c).orient("left"),d=e.models.legend().height(30),v=e.models.legend().height(30),m=d3.dispatch("tooltipShow","tooltipHide");h.tickFormat(function(e){return e}),p.tickFormat(d3.format(",.1f"));var g=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=h.tickFormat()(f.x()(t.point)),o=p.tickFormat()(f.y()(t.point)),u=a(t.series.key,s,o,t,b);e.tooltip.show([r,i],u,t.value<0?"n":"s",null,n)},y=[{key:"Grouped"},{key:"Stacked",disabled:!0}];return b.dispatch=m,b.legend=d,b.xAxis=h,b.yAxis=p,d3.rebind(b,f,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked"),b.margin=function(e){return arguments.length?(t=e,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.color=function(e){return arguments.length?(i=e,d.color(e),b):i},b.showControls=function(e){return arguments.length?(s=e,b):s},b.showLegend=function(e){return arguments.length?(o=e,b):o},b},e.models.multiBarHorizontal=function(){function w(r){return r.each(function(d){var E=t-e.left-e.right,S=n-e.top-e.bottom;l&&(d=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(u)(d)),d=d.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var T=v&&m?[]:d.map(function(e){return e.values.map(function(e,t){return{x:o(e,t),y:u(e,t),y0:e.y0}})});i.domain(v||d3.merge(T).map(function(e){return e.x})).rangeBands([0,S],.1),s.domain(m||d3.extent(d3.merge(T).map(function(e){return e.y+(l?e.y0:0)}).concat(a))),c&&!l?s.range([s.domain()[0]<0?h:0,E-(s.domain()[1]>0?h:0)]):s.range([0,E]),g=g||i,y=y||d3.scale.linear().domain(s.domain()).range([s(0),s(0)]);var N=d3.select(this).selectAll("g.wrap.multibarHorizontal").data([d]),C=N.enter().append("g").attr("class","wrap nvd3 multibarHorizontal"),k=C.append("defs"),L=C.append("g");L.append("g").attr("class","groups");var A=N.select("g");N.attr("transform","translate("+e.left+","+e.top+")");var O=N.select(".groups").selectAll(".group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(O.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.attr("class",function(e,t){return"group series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return f[t%f.length]}).style("stroke",function(e,t){return f[t%f.length]}),d3.transition(O).style("stroke-opacity",1).style("fill-opacity",.75);var M=O.selectAll("g.bar").data(function(e){return e.values});M.exit().remove();var _=M.enter().append("g").attr("transform",function(e,t,n){return"translate("+y(l?e.y0:0)+","+(l?0:n*i.rangeBand()/d.length+i(o(e,t)))+")"}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),b.elementMouseover({value:u(e,t),point:e,series:d[e.series],pos:[s(u(e,t)+(l?e.y0:0)),i(o(e,t))+i.rangeBand()*(l?d.length/2:e.series+.5)/d.length],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),b.elementMouseout({value:u(e,t),point:e,series:d[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){b.elementClick({value:u(e,t),point:e,series:d[e.series],pos:[i(o(e,t))+i.rangeBand()*(l?d.length/2:e.series+.5)/d.length,s(u(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){b.elementDblClick({value:u(e,t),point:e,series:d[e.series],pos:[i(o(e,t))+i.rangeBand()*(l?d.length/2:e.series+.5)/d.length,s(u(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});_.append("rect").attr("width",0).attr("height",i.rangeBand()/(l?1:d.length)),c&&!l?(_.append("text").attr("text-anchor",function(e,t){return u(e,t)<0?"end":"start"}),M.selectAll("text").attr("y",i.rangeBand()/2).attr("dy","-.5em").text(function(e,t){return p(u(e,t))}),d3.transition(M).selectAll("text").attr("dx",function(e,t){return u(e,t)<0?-4:s(u(e,t))-s(0)+4})):M.selectAll("text").remove(),M.attr("class",function(e,t){return u(e,t)<0?"bar negative":"bar positive"}),l?d3.transition(M).attr("transform",function(e,t){return"translate("+s(e.y0)+","+(l?0:j*i.rangeBand()/d.length)+")"}).selectAll("rect").attr("width",function(e,t){return Math.abs(s(u(e,t)+e.y0)-s(e.y0))}).attr("height",i.rangeBand()):d3.transition(M).attr("transform",function(e,t){return"translate("+(u(e,t)<0?s(u(e,t)):s(0))+","+(e.series*i.rangeBand()/d.length+i(o(e,t)))+")"}).selectAll("rect").attr("height",i.rangeBand()/d.length).attr("width",function(e,t){return Math.abs(s(u(e,t))-s(0))}),w.update=function(){r.transition().call(w)},g=i.copy(),y=s.copy()}),w}var e={top:0,right:0,bottom:0,left:0},t=960,n=500,r=Math.floor(Math.random()*1e4),i=d3.scale.ordinal(),s=d3.scale.linear(),o=function(e){return e.x},u=function(e){return e.y},a=[0],f=d3.scale.category20().range(),l=!1,c=!1,h=60,p=d3.format(",.2f"),d=1200,v,m,g,y,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return w.dispatch=b,w.x=function(e){return arguments.length?(o=e,w):o},w.y=function(e){return arguments.length?(u=e,w):u},w.margin=function(t){return arguments.length?(e=t,w):e},w.width=function(e){return arguments.length?(t=e,w):t},w.height=function(e){return arguments.length?(n=e,w):n},w.xScale=function(e){return arguments.length?(i=e,w):i},w.yScale=function(e){return arguments.length?(s=e,w):s},w.xDomain=function(e){return arguments.length?(v=e,w):v},w.yDomain=function(e){return arguments.length?(m=e,w):m},w.forceY=function(e){return arguments.length?(a=e,w):a},w.stacked=function(e){return arguments.length?(l=e,w):l},w.color=function(e){return arguments
.length?(f=e,w):f},w.id=function(e){return arguments.length?(r=e,w):r},w.delay=function(e){return arguments.length?(d=e,w):d},w.showValues=function(e){return arguments.length?(c=e,w):c},w.valueFormat=function(e){return arguments.length?(p=e,w):p},w.valuePadding=function(e){return arguments.length?(h=e,w):h},w},e.models.multiBarHorizontalChart=function(){function b(a){return a.each(function(l){var c=d3.select(this),w=this,E=(n||parseInt(c.style("width"))||960)-t.left-t.right,S=(r||parseInt(c.style("height"))||400)-t.top-t.bottom,x=c.selectAll("g.wrap.multiBarHorizontalChart").data([l]),T=x.enter().append("g").attr("class","wrap nvd3 multiBarHorizontalChart").append("g");T.append("g").attr("class","x axis"),T.append("g").attr("class","y axis"),T.append("g").attr("class","barsWrap"),T.append("g").attr("class","legendWrap"),T.append("g").attr("class","controlsWrap"),t.top=d.height();var N=x.select("g");o&&(d.width(E/2),N.select(".legendWrap").datum(l).call(d),t.top!=d.height()&&(t.top=d.height(),S=(r||parseInt(c.style("height"))||400)-t.top-t.bottom),N.select(".legendWrap").attr("transform","translate("+E/2+","+ -t.top+")")),f.width(E).height(S).color(l.map(function(e,t){return e.color||i[t%i.length]}).filter(function(e,t){return!l[t].disabled})),s&&(v.width(180).color(["#444","#444","#444"]),N.select(".controlsWrap").datum(y).attr("transform","translate(0,"+ -t.top+")").call(v)),N.attr("transform","translate("+t.left+","+t.top+")");var C=N.select(".barsWrap").datum(l.filter(function(e){return!e.disabled}));d3.transition(C).call(f),h.ticks(S/24).tickSize(-E,0),N.select(".x.axis").transition().duration(0).call(h);var k=N.select(".x.axis").selectAll("g");k.selectAll("line, text").style("opacity",1),p.ticks(E/100).tickSize(-S,0),N.select(".y.axis").attr("transform","translate(0,"+S+")"),d3.transition(N.select(".y.axis")).call(p),d.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,l.filter(function(e){return!e.disabled}).length||l.map(function(e){return e.disabled=!1,x.selectAll(".series").classed("disabled",!1),e}),a.transition().call(b)}),v.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;y=y.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":f.stacked(!1);break;case"Stacked":f.stacked(!0)}a.transition().call(b)}),f.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],m.tooltipShow(e)}),u&&m.on("tooltipShow",function(e){g(e,w.parentNode)}),f.dispatch.on("elementMouseout.tooltip",function(e){m.tooltipHide(e)}),u&&m.on("tooltipHide",e.tooltip.cleanup),b.update=function(){a.transition().call(b)},b.container=this}),b}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=d3.scale.category20().range(),s=!0,o=!0,u=!0,a=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},f=e.models.multiBarHorizontal().stacked(!1),l=f.xScale(),c=f.yScale(),h=e.models.axis().scale(l).orient("left").highlightZero(!1).showMaxMin(!1),p=e.models.axis().scale(c).orient("bottom"),d=e.models.legend().height(30),v=e.models.legend().height(30),m=d3.dispatch("tooltipShow","tooltipHide");h.tickFormat(function(e){return e}),p.tickFormat(d3.format(",.1f"));var g=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=h.tickFormat()(f.x()(t.point)),o=p.tickFormat()(f.y()(t.point)),u=a(t.series.key,s,o,t,b);e.tooltip.show([r,i],u,t.value<0?"e":"w")},y=[{key:"Grouped"},{key:"Stacked",disabled:!0}];return b.dispatch=m,b.multibar=f,b.legend=d,b.xAxis=h,b.yAxis=p,d3.rebind(b,f,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","showValues","valueFormat"),b.margin=function(e){return arguments.length?(t=e,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.color=function(e){return arguments.length?(i=e,d.color(e),b):i},b.showControls=function(e){return arguments.length?(s=e,b):s},b.showLegend=function(e){return arguments.length?(o=e,b):o},b.tooltips=function(e){return arguments.length?(u=e,b):u},b.tooltipContent=function(e){return arguments.length?(a=e,b):a},b},e.models.pie=function(){function v(h){return h.each(function(h){function T(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function N(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return b(t(e))}}var p=d3.select(this).on("click",function(e,t){d.chartClick({data:e,index:t,pos:d3.event,id:u})}),v=p.selectAll("svg.margin").data([h]),m=v.enter();m.append("text").attr("class","title").attr("dy",".91em").attr("text-anchor","start").text(c),m.append("svg").attr("class","margin").attr("x",e.left).attr("y",e.top).style("overflow","visible");var g=v.selectAll("g.wrap").data([h]);g.exit().remove();var y=g.enter();y.append("g").attr("class","wrap").attr("id","wrap-"+u).append("g").attr("class","pie"),g.attr("width",t).attr("height",n).attr("transform","translate("+i+","+i+")");var b=d3.svg.arc().outerRadius(i-i/5);l&&b.innerRadius(i/2);var w=d3.layout.pie().value(function(e){return e[o]}),E=v.select(".pie").selectAll(".slice").data(w);E.exit().remove();var S=E.enter().append("svg:g").attr("class","slice").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),d.tooltipShow({label:e.data[s],value:e.data[o],data:e.data,index:t,pos:[d3.event.pageX,d3.event.pageY],id:u})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),d.tooltipHide({label:e.data[s],value:e.data[o],data:e.data,index:t,id:u})}).on("click",function(e,t){d.elementClick({label:e.data[s],value:e.data[o],data:e.data,index:t,pos:d3.event,id:u}),d3.event.stopPropagation()}).on("dblclick",function(e,t){d.elementDblClick({label:e.data[s],value:e.data[o],data:e.data,index:t,pos:d3.event,id:u}),d3.event.stopPropagation()}),x=S.append("svg:path").attr("class","path").attr("fill",function(e,t){return a(t)});E.select(".path").attr("d",b).transition().ease("bounce").duration(r).attrTween("d",N),f&&(S.append("text"),E.select("text").transition().duration(r).ease("bounce").attr("transform",function(e){return e.outerRadius=i+10,e.innerRadius=i+15,"translate("+b.centroid(e)+")"}).attr("text-anchor","middle").style("font","bold 12px Arial").text(function(e,t){return e.data[s]}))}),v}var e={top:20,right:20,bottom:20,left:20},t=500,n=500,r=2e3,i=Math.min(t-(e.right+e.left),n-(e.top+e.bottom))/2,s="label",o="y",u=Math.floor(Math.random()*1e4),a=d3.scale.category20(),f=!0,l=!1,c="",h=0,p=0,d=d3.dispatch("chartClick","elementClick","elementDblClick","tooltipShow","tooltipHide");return v.margin=function(t){return arguments.length?(e=t,v):e},v.width=function(r){return arguments.length?(e.left+e.right+20>r?t=e.left+e.right+20:t=r,i=Math.min(t-(e.left+e.right),n-(e.top+e.bottom))/2,v):t},v.height=function(r){return arguments.length?(e.top+e.bottom+20>r?n=e.top+e.bottom+20:n=r,i=Math.min(t-(e.left+e.right),n-(e.top+e.bottom))/2,v):n},v.animate=function(e){return arguments.length?(r=e,v):r},v.labelField=function(e){return arguments.length?(s=e,v):s},v.dataField=function(e){return arguments.length?(o=e,v):o},v.showLabels=function(e){return arguments.length?(f=e,v):f},v.donut=function(e){return arguments.length?(l=e,v):l},v.title=function(e){return arguments.length?(c=e,v):c},v.id=function(e){return arguments.length?(u=e,v):u},v.dispatch=d,v},e.models.scatter=function(){function k(L){return L.each(function(k){function j(){if(!v)return!1;H.append("g").attr("class","point-paths");var t=d3.merge(k.map(function(e,t){return e.values.map(function(e,n){return[o(f(e,n))*(Math.random()/1e12+1),u(l(e,n))*(Math.random()/1e12+1),t,n]})}));if(g){P.append("clipPath").attr("id","points-clip-"+s);var n=_.select("#points-clip-"+s).selectAll("circle").data(t);n.enter().append("circle").attr("r",y),n.exit().remove(),n.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),_.select(".point-paths").attr("clip-path","url(#points-clip-"+s+")")}var r=d3.geom.voronoi(t).map(function(e,n){return{data:e,series:t[n][2],point:t[n][3]}}),i=_.select(".point-paths").selectAll("path").data(r);i.enter().append("path").attr("class",function(e,t){return"path-"+t}),i.exit().remove(),i.attr("d",function(e){return"M"+e.data.join(",")+"Z"}).on("click",function(t){var n=k[t.series],r=n.values[t.point];S.elementClick({point:r,series:n,pos:[o(f(r,t.point))+e.left,u(l(r,t.point))+e.top],seriesIndex:t.series,pointIndex:t.point})}).on("mouseover",function(t){var n=k[t.series],r=n.values[t.point];S.elementMouseover({point:r,series:n,pos:[o(f(r,t.point))+e.left,u(l(r,t.point))+e.top],seriesIndex:t.series,pointIndex:t.point})}).on("mouseout",function(e,t){S.elementMouseout({point:k[e.series].values[e.point],series:k[e.series],seriesIndex:e.series,pointIndex:e.point})}),S.on("elementMouseover.point",function(e){d3.select(".chart-"+s+" .series-"+e.seriesIndex+" .point-"+e.pointIndex).classed("hover",!0)}),S.on("elementMouseout.point",function(e){d3.select(".chart-"+s+" .series-"+e.seriesIndex+" .point-"+e.pointIndex).classed("hover",!1)})}var L=t-e.left-e.right,A=n-e.top-e.bottom,O=d3.select(this);x=x||o,T=T||u,N=N||a,k=k.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var M=b&&w&&E?[]:k.map(function(e){return e.values.map(function(e,t){return{x:f(e,t),y:l(e,t),size:c(e,t)}})});o.domain(b||d3.extent(d3.merge(M).map(function(e){return e.x}).concat(h))).range([0,L]),u.domain(w||d3.extent(d3.merge(M).map(function(e){return e.y}).concat(p))).range([A,0]),a.domain(E||d3.extent(d3.merge(M).map(function(e){return e.size}).concat(d))).range([16,256]);var _=O.selectAll("g.wrap.scatter").data([k]),D=_.enter().append("g").attr("class","wrap nvd3 scatter chart-"+s),P=D.append("defs"),H=D.append("g"),B=_.select("g");H.append("g").attr("class","groups"),_.attr("transform","translate("+e.left+","+e.top+")"),P.append("clipPath").attr("id","edge-clip-"+s).append("rect"),_.select("#edge-clip-"+s+" rect").attr("width",L).attr("height",A),B.attr("clip-path",m?"url(#edge-clip-"+s+")":"");var F=_.select(".groups").selectAll(".group").data(function(e){return e},function(e){return e.key});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(F.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",function(e,t){return"group series-"+t}).classed("hover",function(e){return e.hover}),d3.transition(F).style("fill",function(e,t){return r[t%r.length]}).style("stroke",function(e,t){return r[t%r.length]}).style("stroke-opacity",1).style("fill-opacity",.5);var I=F.selectAll("path.point").data(function(e){return e.values});I.enter().append("path").attr("transform",function(e,t){return"translate("+x(f(e,t))+","+T(l(e,t))+")"}).attr("d",d3.svg.symbol().type(function(e,t){return e.shape||i}).size(function(e,t){return a(c(e,t))})),d3.transition(F.exit().selectAll("path.point")).attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).remove(),I.attr("class",function(e,t){return"point point-"+t}),d3.transition(I).attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).attr("d",d3.svg.symbol().type(function(e,t){return e.shape||i}).size(function(e,t){return a(c(e,t))})),clearTimeout(C),C=setTimeout(j,750),x=o.copy(),T=u.copy(),N=a.copy()}),k}var e={top:0,right:0,bottom:0,left:0},t=960,n=500,r=d3.scale.category20().range(),i="circle",s=Math.floor(Math.random()*1e5),o=d3.scale.linear(),u=d3.scale.linear(),a=d3.scale.linear(),f=function(e){return e.x},l=function(e){return e.y},c=function(e){return e.size},h=[],p=[],d=[],v=!0,m=!1,g=!0,y=function(){return 25},b,w,E,S=d3.dispatch("elementClick","elementMouseover","elementMouseout"),x,T,N,C;return k.dispatch=S,k.x=function(e){return arguments.length?(f=d3.functor(e),k):f},k.y=function(e){return arguments.length?(l=d3.functor(e),k):l},k.size=function(e){return arguments.length?(c=d3.functor(e),k):c},k.margin=function(t){return arguments.length?(e=t,k):e},k.width=function(e){return arguments.length?(t=e,k):t},k.height=function(e){return arguments.length?(n=e,k):n},k.xScale=function(e){return arguments.length?(o=e,k):o},k.yScale=function(e){return arguments.length?(u=e,k):u},k.zScale=function(e){return arguments.length?(a=e,k):a},k.xDomain=function(e){return arguments.length?(b=e,k):b},k.yDomain=function(e){return arguments.length?(w=e,k):w},k.sizeDomain=function(e){return arguments.length?(E=e,k):E},k.forceX=function(e){return arguments.length?(h=e,k):h},k.forceY=function(e){return arguments.length?(p=e,k):p},k.forceSize=function(e){return arguments.length?(d=e,k):d},k.interactive=function(e){return arguments.length?(v=e,k):v},k.clipEdge=function(e){return arguments.length?(m=e,k):m},k.clipVoronoi=function(e){return arguments.length?(g=e,k):g},k.clipRadius=function(e){return arguments.length?(y=e,k):y},k.color=function(e){return arguments.length?(r=e,k):r},k.shape=function(e){return arguments.length?(i=e,k):i},k.id=function(e){return arguments.length?(s=e,k):s},k},e.models.scatterChart=function(){function A(s){return s.each(function(o){function H(){if(l)return D.select(".point-paths").style("pointer-events","all"),!1;D.select(".background").style("pointer-events","all"),D.select(".point-paths").style("pointer-events","none");var e=d3.mouse(this);v.distortion(f).focus(e[0]),m.distortion(f).focus(e[1]),P.call(g),D.select(".x.axis").call(y),D.select(".y.axis").call(b),D.select(".distributionX").datum(o.filter(function(e){return!e.disabled})).call(S),D.select(".distributionY").datum(o.filter(function(e){return!e.disabled})).call(x)}var h=d3.select(this),p=this,d=(n||parseInt(h.style("width"))||960)-t.left-t.right,O=(r||parseInt(h.style("height"))||400)-t.top-t.bottom;N=N||g.xScale(),C=C||g.yScale();var M=h.selectAll("g.wrap.scatterChart").data([o]),_=M.enter().append("g").attr("class","wrap nvd3 scatterChart chart-"+g.id()).append("g");_.append("rect").attr("class","nvd3 background").attr("width",d).attr("height",O),_.append("g").attr("class","x axis"),_.append("g").attr("class","y axis"),_.append("g").attr("class","scatterWrap"),_.append("g").attr("class","distWrap"),_.append("g").attr("class","legendWrap"),_.append("g").attr("class","controlsWrap");var D=M.select("g");u&&(w.width(d/2),M.select(".legendWrap").datum(o).call(w),t.top!=w.height()&&(t.top=w.height(),O=(r||parseInt(h.style("height"))||400)-t.top-t.bottom),M.select(".legendWrap").attr("transform","translate("+d/2+","+ -t.top+")")),a&&(E.width(180).color(["#444"]),D.select(".controlsWrap").datum(L).attr("transform","translate(0,"+ -t.top+")").call(E)),g.width(d).height(O).color(o.map(function(e,t){return e.color||i[t%i.length]}).filter(function(e,t){return!o[t].disabled})),D.attr("transform","translate("+t.left+","+t.top+")");var P=M.select(".scatterWrap").datum(o.filter(function(e){return!e.disabled}));d3.transition(P).call(g),y.ticks(d/100).tickSize(-O,0),D.select(".x.axis").attr("transform","translate(0,"+m.range()[0]+")"),d3.transition(D.select(".x.axis")).call(y),b.ticks(O/36).tickSize(-d,0),d3.transition(D.select(".y.axis")).call(b),S.width(d).color(o.map(function(e,t){return e.color||i[t%i.length]}).filter(function(e,t){return!o[t].disabled})),_.select(".distWrap").append("g").attr("class","distributionX").attr("transform","translate(0,"+m.range()[0]+")"),D.select(".distributionX").datum(o.filter(function(e){return!e.disabled})).call(S),x.width(O).color(o.map(function(e,t){return e.color||i[t%i.length]}).filter(function(e,t){return!o[t].disabled})),_.select(".distWrap").append("g").attr("class","distributionY").attr("transform","translate(-"+x.size()+",0)"),D.select(".distributionY").datum(o.filter(function(e){return!e.disabled})).call(x),D.select(".background").on("mousemove",H),D.select(".background").on("click",function(){l=!l}),E.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,f=e.disabled?0:2.5,D.select(".background").style("pointer-events",e.disabled?"none":"all"),D.select(".point-paths").style("pointer-events",e.disabled?"all":"none"),e.disabled?(v.distortion(f).focus(0),m.distortion(f).focus(0),P.call(g),D.select(".x.axis").call(y),D.select(".y.axis").call(b)):l=!1,s.transition().call(A)}),w.dispatch.on("legendClick",function(e,t,n){e.disabled=!e.disabled,o.filter(function(e){return!e.disabled}).length||o.map(function(e){return e.disabled=!1,M.selectAll(".series").classed("disabled",!1),e}),s.transition().call(A)}),g.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".chart-"+g.id()+" .series-"+e.seriesIndex+" .distx-"+e.pointIndex).attr("y1",e.pos[1]-O),d3.select(".chart-"+g.id()+" .series-"+e.seriesIndex+" .disty-"+e.pointIndex).attr("x2",e.pos[0]+S.size()),e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],T.tooltipShow(e)}),c&&T.on("tooltipShow",function(e){k(e,p.parentNode)}),g.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e),d3.select(".chart-"+g.id()+" .series-"+e.seriesIndex+" .distx-"+e.pointIndex).attr("y1",0),d3.select(".chart-"+g.id()+" .series-"+e.seriesIndex+" .disty-"+e.pointIndex).attr("x2",x.size())}),c&&T.on("tooltipHide",e.tooltip.cleanup),N=v.copy(),C=m.copy(),A.update=function(){s.transition().call(A)},A.container=this}),A}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=d3.scale.category20().range(),s=!1,o=!1,u=!0,a=!0,f=0,l=!1,c=!0,h=function(e,t,n){return"<strong>"+t+"</strong>"},p=function(e,t,n){return"<strong>"+n+"</strong>"},d=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},v=d3.fisheye.scale(d3.scale.linear).distortion(0),m=d3.fisheye.scale(d3.scale.linear).distortion(0),g=e.models.scatter().xScale(v).yScale(m),y=e.models.axis().orient("bottom").scale(v).tickPadding(10),b=e.models.axis().orient("left").scale(m).tickPadding(10),w=e.models.legend().height(30),E=e.models.legend().height(30),S=e.models.distribution().axis("x").scale(v),x=e.models.distribution().axis("y").scale(m),T=d3.dispatch("tooltipShow","tooltipHide"),N,C,k=function(n,r){var i=n.pos[0]+(r.offsetLeft||0),s=m.range()[0]+t.top+(r.offsetTop||0),o=v.range()[0]+t.left+(r.offsetLeft||0),u=n.pos[1]+(r.offsetTop||0),a=y.tickFormat()(g.x()(n.point)),f=b.tickFormat()(g.y()(n.point)),l=h(n.series.key,a,f,n,A),c=p(n.series.key,a,f,n,A);e.tooltip.show([i,s],l,"n",1),e.tooltip.show([o,u],c,"e",1)},L=[{key:"Magnify",disabled:!0}];return A.dispatch=T,A.legend=w,A.xAxis=y,A.yAxis=b,d3.rebind(A,g,"interactive","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius","fisheye","fisheyeRadius"),A.margin=function(e){return arguments.length?(t=e,A):t},A.width=function(e){return arguments.length?(n=e,A):n},A.height=function(e){return arguments.length?(r=e,A):r},A.color=function(e){return arguments.length?(i=e,w.color(e),S.color(e),x.color(e),A):i},A.showDistX=function(e){return arguments.length?(s=e,A):s},A.showDistY=function(e){return arguments.length?(o=e,A):o},A.showControls=function(e){return arguments.length?(a=e,A):a},A.showLegend=function(e){return arguments.length?(u=e,A):u},A.fisheye=function(e){return arguments.length?(f=e,A):f},A.tooltips=function(e){return arguments.length?(c=e,A):c},A.tooltipContent=function(e){return arguments.length?(d=e,A):d},A},e.models.sparkline=function(){function c(r){return r.each(function(r){var c=t-e.left-e.right,h=n-e.top-e.bottom;f.domain(u||d3.extent(r,i)).range([0,c]),l.domain(a||d3.extent(r,s)).range([h,0]);var p=d3.select(this).selectAll("g.sparkline").data([r]),d=p.enter().append("g").attr("class","nvd3 sparkline");d.attr("transform","translate("+e.left+","+e.top+")").style("stroke",function(e,t){return e.color||o[t*o.length]});var v=d.selectAll("path").data(function(e){return[e]});v.enter().append("path"),v.exit().remove(),v.attr("d",d3.svg.line().x(function(e,t){return f(i(e,t))}).y(function(e,t){return l(s(e,t))}));var m=d.selectAll("circle.point").data(function(e){return e.filter(function(e,t){return l.domain().indexOf(s(e,t))!=-1||i(e,t)==f.domain()[1]})});m.enter().append("circle").attr("class","point"),m.exit().remove(),m.attr("cx",function(e,t){return f(i(e,t))}).attr("cy",function(e,t){return l(s(e,t))}).attr("r",2).style("stroke",function(e,t){return e.x==f.domain()[1]?"#444":e.y==l.domain()[0]?"#d62728":"#2ca02c"}).style("fill",function(e,t){return e.x==f.domain()[1]?"#444":e.y==l.domain()[0]?"#d62728":"#2ca02c"})}),c}var e={top:0,right:0,bottom:0,left:0},t=400,n=32,r=!0,i=function(e){return e.x},s=function(e){return e.y},o=d3.scale.category20().range(),u,a,f=d3.scale.linear(),l=d3.scale.linear();return c.margin=function(t){return arguments.length?(e=t,c):e},c.width=function(e){return arguments.length?(t=e,c):t},c.height=function(e){return arguments.length?(n=e,c):n},c.x=function(e){return arguments.length?(i=d3.functor(e),c):i},c.y=function(e){return arguments.length?(s=d3.functor(e),c):s},c.xDomain=function(e){return arguments.length?(u=e,c):u},c.yDomain=function(e){return arguments.length?(a=e,c):a},c.animate=function(e){return arguments.length?(r=e,c):r},c},e.models.sparklinePlus=function(){function d(e){return e.each(function(e){function T(){var n=d3.event.offsetX-t.left;w.attr("x1",n).attr("x2",n),E.attr("transform",function(e){return"translate("+(n-6)+","+ -t.top+")"}).text(f(Math.round(c.invert(n)))),S.attr("transform",function(e){return"translate("+(n+6)+","+ -t.top+")"}).text(l(o(e[Math.round(c.invert(n))])))}var i=n-t.left-t.right,a=r-t.top-t.bottom;c.domain(d3.extent(e,s)).range([0,i]),h.domain(d3.extent(e,o)).range([a,0]);var d=d3.select(this).selectAll("g.sparklineplus").data([e]),v=d.enter().append("g"),m=v.append("g").attr("class","nvd3 sparklineplus").attr("transform","translate("+t.left+","+t.top+")").style("stroke",function(e,t){return e.color||u[t%u.length]});p.xDomain(c.domain()).yDomain(h.domain()),m.call(p);var g=m.append("g").attr("class","hoverValue"),b=m.append("g").attr("class","hoverArea");g.attr("transform",function(e){return"translate("+c(e)+",0)"});var w=g.append("line").attr("x1",c.range()[1]).attr("y1",-t.top).attr("x2",c.range()[1]).attr("y2",r),E=g.append("text").attr("class","xValue").attr("text-anchor","end").attr("dy",".9em"),S=g.append("text").attr("class","yValue").attr("text-anchor","start").attr("dy",".9em");b.append("rect").attr("width",i).attr("height",a).on("mousemove",T)}),d}var t={top:15,right:40,bottom:3,left:40},n=400,r=50,i=!0,s=function(e){return e.x},o=function(e){return e.y},u=d3.scale.category20().range(),a=Math.floor(Math.random()*1e5),f=d3.format(",r"),l=d3.format(",.2f"),c=d3.scale.linear(),h=d3.scale.linear(),p=e.models.sparkline();return d.margin=function(e){return arguments.length?(t=e,d):t},d.width=function(e){return arguments.length?(n=e,p.width(e-t.left-t.right),d):n},d.height=function(e){return arguments.length?(r=e,p.height(e-t.top-t.bottom),d):r},d.x=function(e){return arguments.length?(s=d3.functor(e),p.x(e),d):s},d.y=function(e){return arguments.length?(o=d3.functor(e),p.y(e),d):o},d.id=function(e){return arguments.length?(a=e,d):a},d.animate=function(e){return arguments.length?(i=e,d):i},d},e.models.stackedArea=function(){function g(e){return e.each(function(e){var a=n-t.left-t.right,h=r-t.top-t.bottom;e=e.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:u(t,n),t}),e}),e=d3.layout.stack().order(l).offset(f).values(function(e){return e.values}).x(o).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(e);var g=d3.select(this).selectAll("g.wrap.stackedarea").data([e]),b=g.enter().append("g").attr("class","wrap nvd3 stackedarea"),w=b.append("defs"),E=b.append("g"),S=g.select("g");E.append("g").attr("class","areaWrap"),p.width(a).height(h).x(o).y(function(e){return e.display.y+e.display.y0}).forceY([0]).color(e.map(function(e,t){return e.color||i[t%i.length]}).filter(function(t,n){return!e[n].disabled})),E.append("g").attr("class","scatterWrap");var T=S.select(".scatterWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(T).call(p),g.attr("transform","translate("+t.left+","+t.top+")"),w.append("clipPath").attr("id","edge-clip-"+s).append("rect"),g.select("#edge-clip-"+s+" rect").attr("width",a).attr("height",h),S.attr("clip-path",c?"url(#edge-clip-"+s+")":"");var N=d3.svg.area().x(function(e,t){return d(o(e,t))}).y0(function(e){return v(e.display.y0)}).y1(function(e){return v(e.display.y+e.display.y0)}),C=d3.svg.area().x(function(e,t){return d(o(e,t))}).y0(function(e){return v(e.display.y0)}).y1(function(e){return v(e.display.y0)}),k=S.select(".areaWrap").selectAll("path.area").data(function(e){return e});k.enter().append("path").attr("class",function(e,t){return"area area-"+t}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),m.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),d3.transition(k.exit()).attr("d",function(e,t){return C(e.values,t)}).remove(),k.style("fill",function(e,t){return e.color||i[t%i.length]}).style("stroke",function(e,t){return e.color||i[t%i.length]}),d3.transition(k).attr("d",function(e,t){return N(e.values,t)}),p.dispatch.on("elementClick.area",function(e){m.areaClick(e)}),p.dispatch.on("elementMouseover.area",function(e){S.select(".area-"+e.seriesIndex).classed("hover",!0)}),p.dispatch.on("elementMouseout.area",function(e){S.select(".area-"+e.seriesIndex).classed("hover",!1)})}),g}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.category20().range(),s=Math.floor(Math.random()*1e5),o=function(e){return e.x},u=function(e){return e.y},a="stack",f="zero",l="default",c=!1,h=d3.layout.stack().values(function(e){return e.values}).x(o).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}}),p=e.models.scatter().size(2.2).sizeDomain([2.5]),d=p.xScale(),v=p.yScale(),m=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return g.dispatch=m,g.scatter=p,d3.rebind(g,p,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),g.x=function(e){return arguments.length?(o=d3.functor(e),g):o},g.y=function(e){return arguments.length?(u=d3.functor(e),g):u},g.margin=function(e){return arguments.length?(t=e,g):t},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.clipEdge=function(e){return arguments.length?(c=e,g):c},g.color=function(e){return arguments.length?(i=e,g):i},g.offset=function(e){return arguments.length?(f=e,g):f},g.order=function(e){return arguments.length?(l=e,g):l},g.style=function(e){if(!arguments.length)return a;a=e;switch(a){case"stack":g.offset("zero"),g.order("default");break;case"stream":g.offset("wiggle"),g.order("inside-out");break;case"expand":g.offset("expand"),g.order("default")}return g},p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],m.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){m.tooltipHide(e)}),g},e.models.stackedAreaChart=function(){function b(i){return i.each(function(a){var l=d3.select(this),c=this,w=(n||parseInt(l.style("width"))||960)-t.left-t.right,E=(r||parseInt(l.style("height"))||400)-t.top-t.bottom,S=l.selectAll("g.wrap.stackedAreaChart").data([a]),x=S.enter().append("g").attr("class","wrap nvd3 stackedAreaChart").append("g");x.append("g").attr("class","x axis"),x.append("g").attr("class","y axis"),x.append("g").attr("class","stackedWrap"),x.append("g").attr("class","legendWrap"),x.append("g").attr("class","controlsWrap");var T=S.select("g");o&&(d.width(w/2),T.select(".legendWrap").datum(a).call(d),t.top!=d.height()&&(t.top=d.height(),E=(r||parseInt(l.style("height"))||400)-t.top-t.bottom),T.select(".legendWrap").attr("transform","translate("+(w/2-t.left)+","+ -t.top+")")),f.width(w).height(E),s&&(v.width(280).color(["#444","#444","#444"]),T.select(".controlsWrap").datum(g).attr("transform","translate(0,"+ -t.top+")").call(v)),T.attr("transform","translate("+t.left+","+t.top+")");var N=T.select(".stackedWrap").datum(a);d3.transition(N).call(f),h.ticks(w/100).tickSize(-E,0),T.select(".x.axis").attr("transform","translate(0,"+E+")"),d3.transition(T.select(".x.axis")).call(h),p.ticks(f.offset()=="wiggle"?0:E/36).tickSize(-w,0).tickFormat(f.offset()=="expand"?d3.format("%"):d3.format(",.2f")),d3.transition(T.select(".y.axis")).call(p),f.dispatch.on("areaClick.toggle",function(e){a.filter(function(e){return!e.disabled}).length===1?a=a.map(function(e){return e.disabled=!1,e}):a=a.map(function(t,n){return t.disabled=n!=e.seriesIndex,t}),i.transition().call(b)}),d.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,a.filter(function(e){return!e.disabled}).length||a.map(function(e){return e.disabled=!1,e}),i.transition().call(b)}),v.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;g=g.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Stacked":f.style("stack");break;case"Stream":f.style("stream");break;case"Expanded":f.style("expand")}i.transition().call(b)}),f.dispatch.on("tooltipShow",function(e){if(!Math.round(f.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],m.tooltipShow(e)}),u&&m.on("tooltipShow",function(e){y(e,c.parentNode)}),f.dispatch.on("tooltipHide",function(e){m.tooltipHide(e)}),u&&m.on("tooltipHide",e.tooltip.cleanup),b.update=function(){i.transition().call(b)},b.container=this}),b}var t={top:30,right:25,bottom:50,left:60},n=null,r=null,i=d3.scale.category20().range(),s=!0,o=!0,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},f=e.models.stackedArea(),l=f.xScale(),c=f.yScale(),h=e.models.axis().scale(l).orient("bottom").tickPadding(5),p=e.models.axis().scale(c).orient("left"),d=e.models.legend().height(30),v=e.models.legend().height(30),m=d3.dispatch("tooltipShow","tooltipHide"),g=[{key:"Stacked"},{key:"Stream",disabled:!0},{key:"Expanded",disabled:!0}],y=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=h.tickFormat()(f.x()(t.point)),o=p.tickFormat()(f.y()(t.point)),u=a(t.series.key,s,o,t,b);e.tooltip.show([r,i],u,t.value<0?"n":"s")};return b.dispatch=m,b.stacked=f,b.xAxis=h,b.yAxis=p,d3.rebind(b,f,"x","y","interactive","offset","order","style","clipEdge","size","forceX","forceY","forceSize"),b.margin=function(e){return arguments.length?(t=e,b):t},b.width=function(e){return arguments.length?(n=e,b):getWidth},b.height=function(e){return arguments.length?(r=e,b):getHeight},b.color=function(e){return arguments.length?(i=e,d.color(e),b):i},b.showControls=function(e){return arguments.length?(s=e,b):s},b.showLegend=function(e){return arguments.length?(o=e,b):o},b.tooltips=function(e){return arguments.length?(u=e,b):u},b.tooltipContent=function(e){return arguments.length?(a=e,b):a},b}})();